(()=>{"use strict";var e={136:function(e,t,s){s(1);var i,n,r,a,o,c,h,l,d,u,p,v,g,k,m,I,f=s(2),N=s(116),J=s(117),Y=s(118),C=s(119),w=s(120),E=s(121),y=s(122),M=s(123),R=s(126),T=s(127),x=s(129);class P extends R.wG{}class A{#e=f.wk1(-1);get owner(){return f.JtY(this.#e)}set owner(e){f.hZp(this.#e,e,!0)}}class U{isMe;ownerName=""}class _ extends R.Nd{#t=f.wk1(f.BXG([]));get playerInfo(){return f.JtY(this.#t)}set playerInfo(e){f.hZp(this.#t,e,!0)}#s=f.wk1(0);get turnIndex(){return f.JtY(this.#s)}set turnIndex(e){f.hZp(this.#s,e,!0)}#i=f.wk1(f.BXG([]));get playerDiscInfo(){return f.JtY(this.#i)}set playerDiscInfo(e){f.hZp(this.#i,e,!0)}discIndex=0;#n=f.unG(()=>this.playing&&this.playerIsMe(this.playerInfo[this.turnIndex]));get canMove(){return f.JtY(this.#n)}set canMove(e){f.hZp(this.#n,e)}formatPlayerName(e,t){return e?(0,T.M0)(this.clients[e.owner],e.owner):`<unknown${void 0===t?"":" pn#"+t}>`}playerIsMe(e){return e?.owner===this.localClient.cn}processWelcomeGame(e){super.processWelcomeGame(e),this.processPlayerInfos(e),this.processDiscInfos(e),this.processRoundInfo(e)}processPlayerInfos(e){let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getCN();if(s<0)break;let i=new this.PlayerInfoType;i.owner=s,this.processPlayerInfo(e,i),t.push(i)}if((this.playerInfo=t).length){if(this.turnIndex=e.getInt(),this.turnIndex<0||this.turnIndex>=t.length)throw Error("bad turnIndex")}else this.turnIndex=0}processDiscInfos(e){let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getString(20);if(!s)break;let i=e.getCN(),n=new this.PlayerDiscType;n.ownerName=`${s} (${i})`,this.processDiscInfo(e,n),t.push(n)}if(this.playerDiscInfo=t,this.discIndex=e.getInt(),this.discIndex<0||this.discIndex>this.playerDiscInfo.length)throw Error("bad discIndex")}processRoundStart(e){super.processRoundStart(e);let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getCN();if(s<0)break;let i=new this.PlayerInfoType;i.owner=s,t.push(i)}this.playerInfo=t,this.playerDiscInfo=[],this.turnIndex=0,this.discIndex=0,this.processRoundStartInfo(e)}processEliminateBase(e,t){let s=e.getInt(),i=this.playerInfo[s];if(!i)throw Error("invalid eliminate pn "+s);let n=new this.PlayerDiscType,r=this.clients[i.owner];if(!r)throw Error(`invalid owner ${i.owner} of pn ${s}`);n.ownerName=(0,T.M0)(r,i.owner),n.isMe=r===this.localClient;let a=this.eliminatePlayer(e,n,s,i,r,t);this.playerInfo.splice(s,1),this.playerDiscInfo.splice(this.discIndex,0,n),a&&this.discIndex++}processEliminate(e){this.processEliminateBase(e,!1)}processEliminateEarly(e){this.processEliminateBase(e,!0)}nextTurn(){++this.turnIndex==this.playerInfo.length&&(this.turnIndex=0)}}let b=[["optTurnTime","i",2e4,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optDecks","I",1,"Decks","number of decks",1,0x8000000000000],["optJokers","i",2,"Jokers","number of jokers per deck",0,2],["optKeepJokers","b",!1,"Keep Jokers","Scum and HS keep jokers during card transfer"],["optMustGiveLowest","b",!1,"Must give lowest","President and VP must give lowest cards during card transfer"],["optRev","e",0,"Revolutions","combo of 4 or more cards (and selected condition) reverses rankings",["off","on, strict (no jokers)","on, relaxed (any 4 are non-joker)","on, jokers (any)"]],["optRevEndTrick","b",!1,"Revolution ends trick","a revolution ends the current trick and starts a new one"],["opt1Fewer2","b",!0,"One fewer 2",""],["optPass","e",1,"Pass","",["pass turn","pass trick","single turn"]],["optEqualize","e",1,"Equalize","",["disallow","allow","equalize or skip","equalize or pass","force skip (next player skips)"]],["optEqualizeEndTrickByScum","b",!1,"Equalize end trick by Scum","trick ends if Scum equalizes"],["optEqualizeEndTrickByOthers","b",!1,"Equalize end trick by non-Scum","trick ends if others equalize"],["optEqualizeOnlyScum","b",!1,"Equalize only by Scum","only Scum can equalize"],["opt4inARow","b",!1,"4-in-a-row","4 or more cards of the same rank (including equalizing) ends trick"],["opt8","b",!1,"8-rule","rank 8 ends trick"],["optPenalizeFinal2","b",!1,"Penalize final 2","playing 2 as last card incurs rank penalty"],["optPenalizeFinalJoker","b",!1,"Penalize final joker","playing joker as last card incurs rank penalty"],["optFirstTrick","e",0,"First Trick","who starts?",["Scum","President","Random"]]];function S(e){return e.optTurnTime+"/"+e.optDecks+"/"+e.optJokers+(e.optKeepJokers?"J":"j")+(e.optMustGiveLowest?"G":"g")+e.optRev+(e.optRevEndTrick?"R":"r")+(e.opt1Fewer2?"T":"t")+e.optPass+e.optEqualize+(e.optEqualizeEndTrickByScum?"E":"e")+(e.optEqualizeEndTrickByOthers?"E":"e")+(e.optEqualizeOnlyScum?"E":"e")+(e.opt4inARow?"F":"f")+(e.opt8?"B":"b")+(e.optPenalizeFinal2?"P":"p")+(e.optPenalizeFinalJoker?"P":"p")+e.optFirstTrick}(i=d||(d={}))[i.WELCOME=0]="WELCOME",i[i.JOIN=1]="JOIN",i[i.LEAVE=2]="LEAVE",i[i.RESET=3]="RESET",i[i.RENAME=4]="RENAME",i[i.PING=5]="PING",i[i.PING_TIME=6]="PING_TIME",i[i.CHAT=7]="CHAT",i[i.ACTIVE=8]="ACTIVE",i[i.ROUND_WAIT=9]="ROUND_WAIT",i[i.ROUND_INTERM=10]="ROUND_INTERM",i[i.ROUND_START=11]="ROUND_START",i[i.READY=12]="READY",i[i.END_ROUND=13]="END_ROUND",i[i.MOVE_CONFIRM=14]="MOVE_CONFIRM",i[i.END_TURN=15]="END_TURN",i[i.END_TURN_TRANSFER=16]="END_TURN_TRANSFER",i[i.END_TURN_TRANSFER_DISCARD=17]="END_TURN_TRANSFER_DISCARD",i[i.PLAYER_ELIMINATE=18]="PLAYER_ELIMINATE",i[i.PLAYER_ELIMINATE_EARLY=19]="PLAYER_ELIMINATE_EARLY",i[i.PLAYER_PRIVATE_INFO_HAND=20]="PLAYER_PRIVATE_INFO_HAND",i[i.PLAYER_PRIVATE_INFO_GIVE=21]="PLAYER_PRIVATE_INFO_GIVE",(n=u||(u={}))[n.RESET=0]="RESET",n[n.RENAME=1]="RENAME",n[n.PONG=2]="PONG",n[n.CHAT=3]="CHAT",n[n.ACTIVE=4]="ACTIVE",n[n.READY=5]="READY",n[n.MOVE_PASS=6]="MOVE_PASS",n[n.MOVE_CONTINUE=7]="MOVE_CONTINUE",n[n.MOVE_START=8]="MOVE_START",n[n.MOVE_TRANSFER=9]="MOVE_TRANSFER",n[n.MOVE_END=10]="MOVE_END";class B extends P{#r=f.wk1(0);get score(){return f.JtY(this.#r)}set score(e){f.hZp(this.#r,e,!0)}#a=f.wk1(0);get streak(){return f.JtY(this.#a)}set streak(e){f.hZp(this.#a,e,!0)}#o=f.wk1(0);get rankLast(){return f.JtY(this.#o)}set rankLast(e){f.hZp(this.#o,e,!0)}#c=f.wk1(5);get roleLast(){return f.JtY(this.#c)}set roleLast(e){f.hZp(this.#c,e,!0)}#h=f.wk1(f.BXG([0,0,0,0,0]));get roleCount(){return f.JtY(this.#h)}set roleCount(e){f.hZp(this.#h,e,!0)}updateScore(e,t){this.rankLast=e,this.score+=t-e+1,2===(this.roleLast=D(e,t))?(this.streak<0&&(this.streak=0),this.streak++):(this.streak>0&&(this.streak=0),this.streak--),this.roleCount[this.roleLast+2]++}resetScore(){this.score=0,this.streak=0,this.rankLast=0,this.rankLast=5,this.roleCount=[0,0,0,0,0]}readWelcome(e){super.readWelcome(e),this.score=e.getInt(),this.streak=e.getInt(),this.rankLast=e.getInt(),this.roleLast=e.getInt();for(let t=0;t<5;t++)this.roleCount[t]=e.getInt()}}class L extends A{#l=f.wk1(0);get role(){return f.JtY(this.#l)}set role(e){f.hZp(this.#l,e,!0)}#d=f.wk1(f.BXG($()));get discarded(){return f.JtY(this.#d)}set discarded(e){f.hZp(this.#d,e,!0)}#u=f.wk1(0n);get handSize(){return f.JtY(this.#u)}set handSize(e){f.hZp(this.#u,e,!0)}#p=f.wk1(!1);get passed(){return f.JtY(this.#p)}set passed(e){f.hZp(this.#p,e,!0)}}class G extends U{trickNum=0;trickTurn=0;duration=0n;discarded=$();hand=$();prevRole=0;newRole=0}(r=p||(p={}))[r.OFF=0]="OFF",r[r.ON_STRICT=1]="ON_STRICT",r[r.ON_RELAXED=2]="ON_RELAXED",r[r.ON=3]="ON",r[r.NUM=4]="NUM",(a=v||(v={}))[a.PASS_TURN=0]="PASS_TURN",a[a.PASS_TRICK=1]="PASS_TRICK",a[a.SINGLE_TURN=2]="SINGLE_TURN",a[a.NUM=3]="NUM",(o=g||(g={}))[o.DISALLOW=0]="DISALLOW",o[o.ALLOW=1]="ALLOW",o[o.CONTINUE_OR_SKIP=2]="CONTINUE_OR_SKIP",o[o.CONTINUE_OR_PASS=3]="CONTINUE_OR_PASS",o[o.FORCE_SKIP=4]="FORCE_SKIP",o[o.NUM=5]="NUM",(c=k||(k={}))[c.SCUM=0]="SCUM",c[c.PRESIDENT=1]="PRESIDENT",c[c.RANDOM=2]="RANDOM",c[c.NUM=3]="NUM";let O=1n<<51n;class j extends _{PlayerInfoType=L;PlayerDiscType=G;#v=f.wk1(f.BXG((0,y.q)(b)));get mode(){return f.JtY(this.#v)}set mode(e){f.hZp(this.#v,e,!0)}#g=f.wk1(f.BXG(m.GIVE_CARDS));get gamePhase(){return f.JtY(this.#g)}set gamePhase(e){f.hZp(this.#g,e,!0)}#k=f.wk1(0);get giveFlags(){return f.JtY(this.#k)}set giveFlags(e){f.hZp(this.#k,e,!0)}#m=f.wk1(0);get givePlayerIndex(){return f.JtY(this.#m)}set givePlayerIndex(e){f.hZp(this.#m,e,!0)}#I=f.wk1(0);get pres(){return f.JtY(this.#I)}set pres(e){f.hZp(this.#I,e,!0)}#f=f.wk1(0);get scum(){return f.JtY(this.#f)}set scum(e){f.hZp(this.#f,e,!0)}#N=f.wk1(0);get vicePres(){return f.JtY(this.#N)}set vicePres(e){f.hZp(this.#N,e,!0)}#J=f.wk1(0);get highScum(){return f.JtY(this.#J)}set highScum(e){f.hZp(this.#J,e,!0)}#Y=f.wk1(!1);get giveDown(){return f.JtY(this.#Y)}set giveDown(e){f.hZp(this.#Y,e,!0)}#C=f.wk1(0);get take0(){return f.JtY(this.#C)}set take0(e){f.hZp(this.#C,e,!0)}#w=f.wk1(0);get take1(){return f.JtY(this.#w)}set take1(e){f.hZp(this.#w,e,!0)}#E=f.wk1(0);get give0(){return f.JtY(this.#E)}set give0(e){f.hZp(this.#E,e,!0)}#y=f.wk1(0);get give1(){return f.JtY(this.#y)}set give1(e){f.hZp(this.#y,e,!0)}#M=f.wk1(!1);get revolution(){return f.JtY(this.#M)}set revolution(e){f.hZp(this.#M,e,!0)}#R=f.wk1(0);get trickNum(){return f.JtY(this.#R)}set trickNum(e){f.hZp(this.#R,e,!0)}#T=f.wk1(0);get trickTurn(){return f.JtY(this.#T)}set trickTurn(e){f.hZp(this.#T,e,!0)}#x=f.wk1(0n);get trickCount(){return f.JtY(this.#x)}set trickCount(e){f.hZp(this.#x,e,!0)}#P=f.wk1(0n);get trickTotal(){return f.JtY(this.#P)}set trickTotal(e){f.hZp(this.#P,e,!0)}#A=f.wk1(0);get trickRank(){return f.JtY(this.#A)}set trickRank(e){f.hZp(this.#A,e,!0)}#U=f.wk1(!1);get trick1Fewer(){return f.JtY(this.#U)}set trick1Fewer(e){f.hZp(this.#U,e,!0)}penalty=!1;#_=f.wk1(0);get passIndex(){return f.JtY(this.#_)}set passIndex(e){f.hZp(this.#_,e,!0)}#b=f.wk1(f.BXG($()));get cardCountTotal(){return f.JtY(this.#b)}set cardCountTotal(e){f.hZp(this.#b,e,!0)}#S=f.wk1(f.BXG($()));get cardCountMine(){return f.JtY(this.#S)}set cardCountMine(e){f.hZp(this.#S,e,!0)}#B=f.wk1(f.BXG($()));get cardCountDiscard(){return f.JtY(this.#B)}set cardCountDiscard(e){f.hZp(this.#B,e,!0)}#L=f.unG(()=>this.cardCountTotal.map((e,t)=>e-this.cardCountMine[t]-this.cardCountDiscard[t]));get cardCountOthers(){return f.JtY(this.#L)}set cardCountOthers(e){f.hZp(this.#L,e)}#G=f.wk1(f.BXG([]));get moveHistory(){return f.JtY(this.#G)}set moveHistory(e){f.hZp(this.#G,e,!0)}#O=f.wk1(0);get pendingMoveRank(){return f.JtY(this.#O)}set pendingMoveRank(e){f.hZp(this.#O,e,!0)}#j=f.wk1(0);get pendingMoveBase(){return f.JtY(this.#j)}set pendingMoveBase(e){f.hZp(this.#j,e,!0)}#D=f.wk1(0);get pendingMoveJokers(){return f.JtY(this.#D)}set pendingMoveJokers(e){f.hZp(this.#D,e,!0)}#$=f.wk1(0);get pendingMoveRankAck(){return f.JtY(this.#$)}set pendingMoveRankAck(e){f.hZp(this.#$,e,!0)}#F=f.wk1(0);get pendingMoveBaseAck(){return f.JtY(this.#F)}set pendingMoveBaseAck(e){f.hZp(this.#F,e,!0)}#V=f.wk1(0);get pendingMoveJokersAck(){return f.JtY(this.#V)}set pendingMoveJokersAck(e){f.hZp(this.#V,e,!0)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;newClient(){return new B}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",u.RESET)}sendRename(e){this.sendf("is",u.RENAME,e)}sendPong(e){this.sendf("i2",u.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",u.CHAT,t,s,(0,x.JK)(e))}sendActive(){this.sendf("i",u.ACTIVE)}sendReady(){this.sendf("i",u.READY)}setPendingRank(e,t,s){if(this.pendingMoveRank=e,this.trickTurn){let e=this.trickCount-(s&&this.mode.opt1Fewer2&&this.trickCount>1?1n:0n);t>e?(this.pendingMoveBase=Number(e),this.pendingMoveJokers=0):(this.pendingMoveBase=Number(t),this.pendingMoveJokers=Number(e-t))}else this.pendingMoveJokers=+!(this.pendingMoveBase=Number(t))}sendMove(){this.pendingMoveRank<0?(this.pendingMoveBase=this.pendingMoveJokers=0,this.sendf("i",u.MOVE_PASS)):this.trickTurn||!this.pendingMoveBase?(this.pendingMoveBase=0,this.sendf("i2U",u.MOVE_CONTINUE,this.pendingMoveRank,BigInt(this.pendingMoveJokers))):this.sendf("i2U2",u.MOVE_START,this.pendingMoveRank,BigInt(this.pendingMoveJokers),BigInt(this.pendingMoveBase))}sendMoveTransfer(e,t){this.sendf("i3",u.MOVE_TRANSFER,e,t)}sendMoveEnd(){this.sendf("i",u.MOVE_END)}MESSAGE_HANDLERS={[d.WELCOME]:this.processWelcome,[d.JOIN]:this.processJoin,[d.LEAVE]:this.processLeave,[d.RESET]:this.processReset,[d.RENAME]:this.processRename,[d.PING]:this.processPing,[d.PING_TIME]:this.processPingTime,[d.CHAT]:this.processChat,[d.ACTIVE]:this.processActive,[d.ROUND_WAIT]:this.processRoundWait,[d.ROUND_INTERM]:this.processRoundInterm,[d.ROUND_START]:this.processRoundStart,[d.READY]:this.processReady,[d.END_ROUND]:this.processEndRound,[d.MOVE_CONFIRM]:this.processMoveConfirm,[d.END_TURN]:this.processEndTurn,[d.END_TURN_TRANSFER]:this.processEndTurnTransfer,[d.END_TURN_TRANSFER_DISCARD]:this.processEndTurnTransferDiscard,[d.PLAYER_ELIMINATE]:this.processEliminate,[d.PLAYER_ELIMINATE_EARLY]:this.processEliminateEarly,[d.PLAYER_PRIVATE_INFO_HAND]:this.processPrivateInfoHand,[d.PLAYER_PRIVATE_INFO_GIVE]:this.processPrivateInfoGive};processWelcomeMode(e){var t;this.mode.optTurnTime=e.getInt(),this.mode.optDecks=(t=e.getUint64(),1n>t?1n:t<O?t:O);let s=e.get(),i=e.get(),n=e.get();this.mode.optJokers=Math.min(3&s,2),this.mode.optRev=s>>2&3,this.mode.optPass=Math.min(s>>4&3,v.NUM-1),this.mode.optFirstTrick=Math.min(s>>6&3,k.NUM-1),this.mode.optEqualize=Math.min(7&i,g.NUM-1),this.mode.optKeepJokers=!!(8&i),this.mode.optMustGiveLowest=!!(16&i),this.mode.optRevEndTrick=!!(32&i),this.mode.opt1Fewer2=!!(64&i),this.mode.optEqualizeEndTrickByScum=!!(128&i),this.mode.optEqualizeEndTrickByOthers=!!(1&n),this.mode.optEqualizeOnlyScum=!!(2&n),this.mode.opt4inARow=!!(4&n),this.mode.opt8=!!(8&n),this.mode.optPenalizeFinal2=!!(16&n),this.mode.optPenalizeFinalJoker=!!(32&n)}processPlayerInfo(e,t){t.role=0,t.discarded=V(e);let s=e.getUint64();t.handSize=s>>1n,t.passed=!!(1n&s)}processDiscInfo(e,t){t.trickNum=e.getInt(),t.trickTurn=e.getInt(),t.duration=e.getUint64(),t.discarded=V(e),t.hand=V(e),t.prevRole=e.getInt(),t.newRole=e.getInt()}processRoundStartInfo(e){let t=BigInt(52+this.mode.optJokers)*this.mode.optDecks,s=BigInt(this.roundPlayers.length),i=t/s,n=t%s;if(this.playerInfo.forEach((e,t)=>{e.role=0,e.discarded=$(),e.handSize=i,t<n&&e.handSize++,e.passed=!1}),this.moveHistory=[],this.giveFlags=0,this.giveDown=!1,this.givePlayerIndex=-1,this.give0=this.give1=-1,(this.scum=e.getCN())>=0){this.pres=0;let e=this.playerInfo[this.pres],t=this.playerInfo[this.scum];e.role=2,t.role=-2,this.giveFlags=2,e.owner===this.localClient.cn?this.givePlayerIndex=this.scum:t.owner===this.localClient.cn&&(this.givePlayerIndex=this.pres),this.addGivePublic(t,e,2)}else this.pres=-1;if((this.highScum=e.getCN())>=0){this.vicePres=e.getCN();let t=this.playerInfo[this.vicePres],s=this.playerInfo[this.highScum];t.role=1,s.role=-1,this.giveFlags|=1,t.owner===this.localClient.cn?this.givePlayerIndex=this.highScum:s.owner===this.localClient.cn&&(this.givePlayerIndex=this.vicePres),this.addGivePublic(s,t,1)}else this.vicePres=-1;this.revolution=!1,this.trickNum=this.trickTurn=0,this.trickCount=this.trickTotal=0n,this.cardCountDiscard=$(),this.cardCountTotal=F(this.mode.optDecks,this.mode.optJokers),this.turnIndex=e.getInt(),this.passIndex=-1,this.giveFlags?this.gamePhase=m.GIVE_CARDS:this.gamePhase=m.PLAYING_MUST_3,this.resetMove()}processRoundInfo(e){let t;if(this.moveHistory=[],this.cardCountMine=$(),this.cardCountDiscard=$(),this.cardCountTotal=F(this.mode.optDecks,this.mode.optJokers),this.roundState!==R.mk.ACTIVE)return;let s=e.get();if(this.gamePhase=3&s,this.gamePhase===m.GIVE_CARDS?(this.giveFlags=s>>2&3,this.revolution=!1):this.revolution=!!(4&s),(t=this.playerInfo[this.pres=16&s?e.getCN():-1])&&(t.role=2),(t=this.playerInfo[this.scum=32&s?e.getCN():-1])&&(t.role=-2),(t=this.playerInfo[this.vicePres=64&s?e.getCN():-1])&&(t.role=1),(t=this.playerInfo[this.highScum=128&s?e.getCN():-1])&&(t.role=-1),this.trickNum=e.getInt(),this.trickTurn=e.getInt()){this.trickRank=e.getInt();let t=e.getUint64();this.trickCount=t>>1n,this.trickTotal=e.getUint64(),this.trick1Fewer=!!(1n&t)}else this.trickCount=this.trickTotal=0n;this.playerInfo.forEach(e=>{for(let t=0;t<=I.NUM;t++)this.cardCountDiscard[t]+=e.discarded[t]}),this.playerDiscInfo.forEach(e=>{for(let t=0;t<=I.NUM;t++)this.cardCountDiscard[t]+=e.discarded[t]+e.hand[t]}),this.passIndex=e.getInt()}processMoveConfirm(e){this.pendingMoveRankAck=e.getInt(),this.pendingMoveJokersAck=Number(e.getUint64()),this.pendingMoveBaseAck=Number(e.getUint64())}processEndTurn(e){let t=this.playerInfo[this.turnIndex],s=this.clients[t.owner],i=(0,T.M0)(s,t.owner),n=s===this.localClient,r=e.getInt();if(r<0)this.moveHistory.push({type:"pass",playerName:i,playerIsMe:n}),this.gamePhase===m.PLAYING_MUST_EQUALIZE&&this.mode.optEqualize===g.CONTINUE_OR_SKIP?this.turnIndex=this.nextUnpassed(this.turnIndex):this.nextTurnAfterPass(t)&&this.nextTrick(),this.gamePhase=m.PLAYING;else{let s=e.getUint64(),a=this.trickTurn?BigInt(this.trickCount):e.getUint64()+s;if(this.mode.opt1Fewer2){let e=this.revolution?I.N3:I.N2;(this.trick1Fewer=!!this.trickTurn&&a>1&&r===e)?a--:r===I.Joker&&(r=e)}let o=a-s,c=this.mode.opt8&&r===I.N8,h=!1;a>=4&&this.mode.optRev&&(this.mode.optRev===p.ON_STRICT?!s:this.mode.optRev===p.ON_RELAXED?o>=4:this.mode.optRev===p.ON)&&(this.revolution=!this.revolution,this.mode.optRevEndTrick&&(c=!0)),this.trickTurn&&this.trickRank===r?this.trickTotal+=a:this.trickTotal=a,this.mode.opt4inARow&&this.trickTotal>=4&&(c=!0),this.gamePhase=m.PLAYING,this.trickTurn&&this.trickRank===r&&((-2===t.role?this.mode.optEqualizeEndTrickByScum:this.mode.optEqualizeEndTrickByOthers)&&(c=!0),!c&&this.mode.optEqualize>=g.CONTINUE_OR_SKIP&&(this.mode.optEqualize===g.FORCE_SKIP?h=!0:this.gamePhase=m.PLAYING_MUST_EQUALIZE));let l=c,d=this.revolution?I.N3:I.N2,u=this.nextUnpassed(this.turnIndex);(u===this.turnIndex||r===d&&(!this.mode.optEqualize||this.mode.optEqualizeOnlyScum&&this.scum!==u))&&(c=!0),t.discarded[r]+=o,t.discarded[I.Joker]+=s,t.discarded[I.NUM]+=a,(t.handSize-=a)||(this.penalty=!!(r===I.N2&&this.mode.optPenalizeFinal2&&o||s&&this.mode.optPenalizeFinalJoker)),this.cardCountDiscard[r]+=o,this.cardCountDiscard[I.Joker]+=s,this.cardCountDiscard[I.NUM]+=a,n&&(this.cardCountMine[r]-=o,this.cardCountMine[I.Joker]-=s,this.cardCountMine[I.NUM]-=a),this.passIndex=-1,!c&&(this.mode.optPass===v.SINGLE_TURN&&this.trickTurn?c=this.nextTurnAfterPass(t):(this.mode.optPass===v.PASS_TURN&&this.unsetPassed(),this.turnIndex=u,h&&(this.turnIndex=this.nextUnpassed(this.turnIndex)))),c?this.nextTrick(l):(this.trickRank=r,this.trickTurn++||(this.trickCount=a)),this.moveHistory.push({type:"move",playerName:i,playerIsMe:n,rank:r,base:Number(o),jokers:Number(s)})}this.resetMove(),this.setTimer(this.mode.optTurnTime)}nextTrick(e=!1){this.moveHistory.push({type:"tEnd",trick:this.trickNum,turn:this.trickTurn,move:e}),this.unsetPassed(),this.trickNum++,this.trickTurn=0}nextTurnAfterPass(e){let t=this.nextUnpassed(this.turnIndex);return t===this.turnIndex||this.passIndex<0&&this.nextUnpassed(t)===this.turnIndex?(this.turnIndex=this.passIndex<0?t:this.passIndex,this.passIndex=-1,!0):(this.turnIndex=t,e.passed=!0,!1)}nextUnpassed(e){let t=e;do++t===this.playerInfo.length&&(t=0);while(t!==e&&this.playerInfo[t].passed);return t}unsetPassed(){this.playerInfo.forEach(e=>e.passed=!1)}resetMove(){this.pendingMoveRank=this.pendingMoveRankAck=-1,this.pendingMoveBase=this.pendingMoveBaseAck=this.pendingMoveJokers=this.pendingMoveJokersAck=0}processEndRound(e){let t=e.getUint64(),s={duration:t,trickNum:this.trickNum,trickTurn:this.trickTurn,players:this.playerDiscInfo.map(e=>({...e,name:e.ownerName}))},[i]=this.playerInfo,n=this.clients[i.owner],r=this.discIndex+1,a=1+this.playerDiscInfo.length;n.updateScore(r,a),s.players.splice(this.discIndex,0,{name:n.formatName(),isMe:n===this.localClient,trickNum:this.trickNum,trickTurn:this.trickTurn,duration:t,prevRole:i.role,newRole:D(r,a)}),this.addHistory(s)}eliminatePlayer(e,t,s,i,n,r){if(t.trickNum=this.trickNum,t.trickTurn=this.trickTurn,t.duration=e.getUint64(),t.discarded=i.discarded,t.hand=V(e),n!==this.localClient)for(let e=0;e<=I.NUM;e++)this.cardCountDiscard[e]+=t.hand[e];t.prevRole=i.role,r&&(this.gamePhase===m.GIVE_CARDS?(this.pres===s?this.giveFlags&=-3:this.vicePres===s&&(this.giveFlags&=-2),this.checkGivePhaseEnd()):(s===this.turnIndex&&(this.gamePhase===m.PLAYING_MUST_EQUALIZE&&this.mode.optEqualize===g.CONTINUE_OR_SKIP?this.turnIndex=this.nextUnpassed(this.turnIndex):this.nextTurnAfterPass(i)&&this.nextTrick(),this.gamePhase=m.PLAYING),this.setTimer(this.mode.optTurnTime))),this.moveHistory.push({type:"leave",playerName:n.formatName(),playerIsMe:n===this.localClient,cards:t.hand});let a=this.playerInfo.length+this.playerDiscInfo.length,o=this.discIndex+(r||this.penalty?this.playerInfo.length:1);n.updateScore(o,a),t.newRole=D(o,a);let c=this.playerInfo.length-1;return this.turnIndex>s?this.turnIndex--:this.turnIndex===c&&(this.turnIndex=0),r?this.passIndex>s?this.passIndex--:this.passIndex===c&&(this.passIndex=0):this.passIndex=this.turnIndex,this.fixGiveIndex("givePlayerIndex",s),this.fixGiveIndex("pres",s),this.fixGiveIndex("scum",s),this.fixGiveIndex("vicePres",s),this.fixGiveIndex("highScum",s),!r}fixGiveIndex(e,t){this[e]>t?this[e]--:this[e]===t&&(this[e]=-1)}processPrivateInfoHand(e){this.cardCountMine=V(e)}processEndTurnTransfer(e){let t=e.getCN(),s=this.playerInfo[t],i=2===s.role?this.scum:this.highScum,n=this.playerInfo[i];this.giveFlags&=~s.role,this.addGivePublic(s,n,s.role),this.checkGivePhaseEnd()}addGivePublic(e,t,s){let i=this.clients[e.owner],n=this.clients[t.owner];e.handSize-=BigInt(s),t.handSize+=BigInt(s),this.moveHistory.push({type:"give_public",playerName:i.formatName(),playerIsMe:i===this.localClient,targetName:n.formatName(),targetIsMe:n===this.localClient,cardCount:s})}processEndTurnTransferDiscard(e){let t,s=e.getCN(),i=this.playerInfo[s],n=this.clients[i.owner],r=n.formatName(),a=n===this.localClient,o=e.getInt();this.updateDiscardCount(i,o),2===i.role&&this.updateDiscardCount(i,t=e.getInt()),this.giveFlags&=~i.role,this.moveHistory.push({type:"discard",playerName:r,playerIsMe:a,card0:o,card1:t}),this.checkGivePhaseEnd()}checkGivePhaseEnd(){this.giveFlags||(this.gamePhase=m.PLAYING,this.setTimer(this.mode.optTurnTime))}processPrivateInfoGive(e){let t,s=this.playerInfo[this.givePlayerIndex],i=this.clients[s.owner].formatName(),n=s.role>0===this.giveDown,r=n?1n:-1n,a=e.getInt();this.cardCountMine[this.take0=a]+=r,this.cardCountMine[I.NUM]+=r,(2===s.role||-2===s.role)&&(t=e.getInt(),this.cardCountMine[this.take1=t]+=r,this.cardCountMine[I.NUM]+=r),this.moveHistory.push({type:n?"give":"take",playerName:i,card0:a,card1:t}),this.giveDown=!0}updateDiscardCount(e,t,s=1n){e.discarded[t]+=s,e.discarded[I.NUM]+=s,this.cardCountDiscard[t]+=s,this.cardCountDiscard[I.NUM]+=s,e.owner===this.localClient.cn&&(this.cardCountMine[t]-=s,this.cardCountMine[I.NUM]-=s),e.handSize-=s}allowRank(e,t){let s=this.cardCountMine[I.Joker];if(this.trickTurn){let i=this.mode.opt1Fewer2&&this.trickCount>1,n=e===I.Joker,r=this.revolution?I.N3:I.N2,a=this.trickCount-(i&&e===r?1n:0n),o=i&&this.trickRank==r&&!this.trick1Fewer,c=o?I.Joker:this.trickRank,h=this.cardCountMine[n?r:e];return h+s>=a&&(e===c?this.mode.optEqualize!==g.DISALLOW&&(!this.mode.optEqualizeOnlyScum||t):this.gamePhase!==m.PLAYING_MUST_EQUALIZE&&(this.revolution?!o&&(e<c||n):e>c))?h==a?3:h>=a?2:1:0}let i=this.cardCountMine[e];return i+s>0&&(this.gamePhase!==m.PLAYING_MUST_3||e===I.N3)?i?3:1:0}playersSortProps=[e=>e.score,e=>e.streak,e=>-e.rankLast,e=>e.roleLast,e=>e.roleCount[4],e=>e.roleCount[3],e=>e.roleCount[2],e=>-e.roleCount[1],e=>-e.roleCount[0]]}function D(e,t){if(1===e)return 2;if(e===t)return -2;if(t>=4){if(2===e)return 1;if(e===t-1)return -1}return 0}function $(){return[0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n]}function F(e,t){let s=4n*e;return[s,s,s,s,s,s,s,s,s,s,s,s,s,BigInt(t)*e,BigInt(52+t)*e]}function V(e){let t=Array.from({length:I.NUM},()=>e.getUint64());return t.push(t.reduce((e,t)=>e+t,0n)),t}(h=m||(m={}))[h.GIVE_CARDS=0]="GIVE_CARDS",h[h.PLAYING=1]="PLAYING",h[h.PLAYING_MUST_3=2]="PLAYING_MUST_3",h[h.PLAYING_MUST_EQUALIZE=3]="PLAYING_MUST_EQUALIZE",(l=I||(I={}))[l.N3=0]="N3",l[l.N4=1]="N4",l[l.N5=2]="N5",l[l.N6=3]="N6",l[l.N7=4]="N7",l[l.N8=5]="N8",l[l.N9=6]="N9",l[l.N10=7]="N10",l[l.FJack=8]="FJack",l[l.FQueen=9]="FQueen",l[l.FKing=10]="FKing",l[l.Ace=11]="Ace",l[l.N2=12]="N2",l[l.Joker=13]="Joker",l[l.NUM=14]="NUM";let z=[["Scum","danger"],["High-Scum","warning"],["∅","secondary"],["Vice-President","success"],["President","primary"]];function Z(e){return z[e+2][0]}function q(e,t){return`badge text-bg-${t?"":"outline-"}${z[e+2][1]}`}var K=f.vUu("<span> </span>"),H=f.vUu("<!> ",1),Q=f.vUu("<span> </span>"),W=f.vUu("<span> <!> <!></span>");function X(e,t){f.VCO(t,!0);var s=W(),i=f.jfp(s),n=f.hg4(i),r=e=>{var s=H(),i=f.esp(s),n=e=>{var s=f.Qq7();f.vNg(e=>f.jax(s,e),[()=>Z(t.prevRole)]),f.BCw(e,s)};f.if(i,e=>{t.prevRole&&e(n)});var r=f.hg4(i);f.vNg(()=>f.jax(r,` ${t.prevRole<t.newRole?"➚":"➘"}`)),f.BCw(e,s)};f.if(n,e=>{t.prevRole!=t.newRole&&e(r)});var a=f.hg4(n,2),o=e=>{var s=Q(),i=f.jfp(s,!0);f.cLc(s),f.vNg((e,t)=>{f.ysU(s,1,e),f.jax(i,t)},[()=>f.$z$(q(t.newRole,t.isMe)),()=>Z(t.newRole)]),f.BCw(e,s)};f.if(a,e=>{(t.prevRole!=t.newRole||t.newRole)&&e(o)}),f.cLc(s),f.vNg(e=>{f.ysU(s,1,e),f.jax(i,`${t.name??""} `)},[()=>f.$z$(q(t.prevRole,t.isMe))]),f.BCw(e,s),f.uYY()}var ee=f.vUu(' <div class="d-inline-block"> <!> </div>',1),et=f.vUu('<li class="list-group-item"><div> <!></div></li>'),es=f.vUu('<li class="list-group-item">No past games!</li>'),ei=f.vUu('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),en=f.vUu('<span class="badge text-bg-light"> </span><!>,',1),er=f.vUu('<div class="progress"><div class="progress-bar"></div></div>'),ea=f.vUu('<div class="progress-stacked my-1"><div class="progress" style="width: 3.125%"><div class="progress-bar bg-info"></div></div> <!></div>'),eo=f.vUu('<div class="progress bg-primary"></div>'),ec=f.vUu('<tr><td> </td><td class="w-100"><!></td><td> </td></tr>'),eh=f.vUu('<!> <table class="table table-sm"><tbody></tbody></table>',1);function el(e,t){f.VCO(t,!0);let s=f.unG(()=>t.cards.at(-1));var i=f.Imx(),n=f.esp(i),r=e=>{let i=f.unG(()=>t.cards.length-2),n=f.unG(()=>t.cards[f.JtY(i)]),r=f.unG(()=>t.cards.slice(0,-2)),a=f.unG(()=>BigInt(f.JtY(r).filter(e=>e).reduce((e,t)=>e<t?e:t))),o=f.unG(()=>BigInt(f.JtY(r).reduce((e,t)=>e>t?e:t))),c=f.unG(()=>f.JtY(o)-f.JtY(a));var h=eh(),l=f.esp(h),d=e=>{var s=en(),r=f.esp(s),a=f.jfp(r,!0);f.cLc(r);var o=f.hg4(r),c=e=>{var t=f.Qq7();f.vNg(()=>f.jax(t,` \xd7${f.JtY(n)??""}`)),f.BCw(e,t)};f.if(o,e=>{f.JtY(n)>1&&e(c)}),f.K2T(),f.vNg(()=>f.jax(a,t.ranks[f.JtY(i)])),f.BCw(e,s)};f.if(l,e=>{f.JtY(n)&&e(d)});var u=f.hg4(l),p=f.hg4(u),v=f.jfp(p);f.__1(v,21,()=>f.JtY(r),f.Pe0,(e,s,i)=>{var n=f.Imx(),r=f.esp(n),o=e=>{var n=ec(),r=f.jfp(n),o=f.jfp(r,!0);f.cLc(r);var h=f.hg4(r),l=f.jfp(h),d=e=>{var t=ea(),i=f.hg4(f.jfp(t),2),n=e=>{var t=er();f.vNg(e=>f.hgi(t,`width:${e??""}%`),[()=>Number((BigInt(f.JtY(s))-f.JtY(a))*96875n/f.JtY(c))/1e3]),f.BCw(e,t)};f.if(i,e=>{f.JtY(s)>f.JtY(a)&&e(n)}),f.cLc(t),f.BCw(e,t)},u=e=>{var t=eo();f.BCw(e,t)};f.if(l,e=>{f.JtY(c)?e(d):e(u,!1)}),f.cLc(h);var p=f.hg4(h),v=f.jfp(p,!0);f.cLc(p),f.cLc(n),f.vNg(()=>{f.jax(o,t.ranks[i]),f.jax(v,f.JtY(s))}),f.BCw(e,n)};f.if(r,e=>{f.JtY(s)&&e(o)}),f.BCw(e,n)}),f.cLc(v),f.cLc(p),f.vNg(()=>f.jax(u,` ${f.JtY(s)??""} total.   `)),f.BCw(e,h)};f.if(n,e=>{f.JtY(s)&&e(r)}),f.BCw(e,i),f.uYY()}var ed=f.vUu('<span class="badge text-bg-light"> </span><!> ',1);function eu(e,t){f.VCO(t,!0);var s=f.Imx(),i=f.esp(s);f.__1(i,17,()=>t.cards,f.Pe0,(e,s,i)=>{var n=f.Imx(),r=f.esp(n),a=e=>{var n=f.Imx(),r=f.esp(n),a=e=>{var t=f.Qq7();f.vNg(()=>f.jax(t,` ${f.JtY(s)??""} total.`)),f.BCw(e,t)},o=e=>{var n=ed(),r=f.esp(n),a=f.jfp(r,!0);f.cLc(r);var o=f.hg4(r),c=e=>{var t=f.Qq7();f.vNg(()=>f.jax(t,` \xd7${f.JtY(s)??""}`)),f.BCw(e,t)};f.if(o,e=>{f.JtY(s)>1&&e(c)}),f.hg4(o).nodeValue=", ",f.vNg(()=>f.jax(a,t.ranks[i])),f.BCw(e,n)};f.if(r,e=>{i+1==t.cards.length?e(a):e(o,!1)}),f.BCw(e,n)};f.if(r,e=>{f.JtY(s)&&e(a)}),f.BCw(e,n)}),f.BCw(e,s),f.uYY()}var ep=f.vUu('<th scope="col"> </th>'),ev=f.vUu("<td> </td>"),eg=f.vUu('<tr><th scope="row"> </th><!></tr>'),ek=f.vUu('<div class="table-responsive"><table class="table table-sm"><thead><tr><th></th><!></tr></thead><tbody></tbody></table></div>');function em(e,t){var s=ek(),i=f.jfp(s),n=f.jfp(i),r=f.jfp(n),a=f.hg4(f.jfp(r));f.__1(a,17,()=>t.ranks,f.Pe0,(e,t)=>{var s=ep(),i=f.jfp(s,!0);f.cLc(s),f.vNg(()=>f.jax(i,f.JtY(t))),f.BCw(e,s)}),f.cLc(r),f.cLc(n);var o=f.hg4(n);f.__1(o,21,()=>t.counts,f.Pe0,(e,t)=>{var s=eg(),i=f.jfp(s),n=f.jfp(i,!0);f.cLc(i);var r=f.hg4(i);f.__1(r,17,()=>f.JtY(t)[1],f.Pe0,(e,t)=>{var s=ev(),i=f.jfp(s,!0);f.cLc(s),f.vNg(()=>f.jax(i,f.JtY(t))),f.BCw(e,s)}),f.cLc(s),f.vNg(()=>f.jax(n,f.JtY(t)[0])),f.BCw(e,s)}),f.cLc(o),f.cLc(i),f.cLc(s),f.BCw(e,s)}var eI=s(124),ef=s(131),eN=f.vUu('and <span class="badge text-bg-light"> </span>',1),eJ=f.vUu(' <span class="badge text-bg-light"> </span> <!> <span class="badge text-bg-outline-secondary"> </span>)',1),eY=f.vUu(" <!>",1),eC=f.vUu('played <span class="badge text-bg-light"> </span><!>.',1),ew=f.vUu(" <span> </span>.",1),eE=f.vUu('and <span class="badge text-bg-light"> </span>',1),ey=f.vUu('discarded <span class="badge text-bg-light"> </span> <!>.',1),eM=f.vUu("left, discarding <!>",1),eR=f.vUu("<span> </span> <!>",1),eT=f.vUu("<div><!></div> ",1),ex=f.vUu('<b>Move History</b> <label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">compact</span></label> <div class="overflow-auto" style="max-height: 20rem"></div>',1);let eP=["3","4","5","6","7","8","9","10","J","Q","K","A","2","*","Total"];var eA=f.vUu("<!> <!>",1),eU=f.vUu(' <span class="badge text-bg-light"> </span> <!>',1),e_=f.vUu('<span class="badge text-bg-dark">REVOLUTION ON</span>'),eb=f.vUu('<span class="badge text-bg-outline-dark">OFF REVOLUTION</span>'),eS=f.vUu('and <span class="badge text-bg-light"> </span>',1),eB=f.vUu("<option> </option>"),eL=f.vUu('<select class="form-select"></select>'),eG=(e,t)=>t().sendMoveTransfer(t().give0,t().give1),eO=f.vUu('<div>You got <span class="badge text-bg-light"> </span> <!> </div> <div class="input-group my-2"><!> <!> <button>Give</button></div>',1),ej=f.vUu("<p>The Scum gave the two highest cards to the President, who must choose two cards to give back.</p>"),eD=f.vUu("<p>The High-Scum gave the highest card to the Vice-President, who must choose a card to give back.</p>"),e$=f.vUu('<div class="my-2"><!> <!> <!></div>'),eF=f.vUu("<span>PASS</span>"),eV=f.vUu("<span> </span> <!> <span> </span>",1),ez=(e,t,s,i,n)=>(t().setPendingRank(s(),f.JtY(i),s()===f.JtY(n)),t().sendMove()),eZ=f.vUu("<button> </button>"),eq=(e,t)=>(t().pendingMoveRank=-1,t().sendMove()),eK=f.vUu('<div class="alert alert-success">You will pass.</div>'),eH=f.vUu('<div class="alert alert-danger">You cannot pass when starting a trick.</div>'),eQ=(e,t)=>t().sendMove(),eW=(e,t)=>t().sendMove(),eX=f.vUu('<div class="col">Base Cards <input type="number"/> <input type="range" class="form-range"/></div>'),e1=(e,t)=>t().sendMove(),e0=(e,t)=>t().sendMove(),e2=f.vUu('<div class="col">Jokers <input type="number"/> <input type="range" class="form-range"/></div>'),e4=f.vUu('<!>   <!> <div class="alert alert-success">You will make this move.</div>',1),e3=f.vUu('<div class="alert alert-danger">You cannot make this move. <!></div>'),e7=(e,t)=>t().sendMoveEnd(),e6=f.vUu(`<div class="my-2 text-center">Your move: <!></div> <div class="btn-group d-flex my-2" role="group"><button>Pass</button> <!> <!> <!></div> <div class="my-2"><small>Legend:
            can play <span class="badge text-bg-outline-primary">all cards</span>, <span class="badge text-bg-outline-success">leftover cards</span>, <span class="badge text-bg-outline-info">need jokers</span>, <span class="badge text-bg-outline-secondary">using jokers</span> cannot play <span class="badge text-bg-outline-warning">have cards</span>, <span class="badge text-bg-outline-danger">no cards</span></small></div> <!> <div class="col-12 mb-2"><button class="btn btn-primary d-block w-100 mb-2">End Move</button></div>`,1),e8=f.vUu('<div class="my-2"><label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">Your hand:</span></label> <!></div> <!>',1),e5=f.vUu('<li><span class="badge text-bg-outline-success">IN</span></li>'),e9=f.vUu("<span>MOVE</span>"),te=f.vUu("<span>OUT</span>"),tt=f.vUu("<!> <li><span> </span> <!> <!> <!></li>",1),ts=f.vUu("<li>No players!</li>"),ti=f.vUu("<li> <!> </li>"),tn=f.vUu("<li>No leavers yet!</li>"),tr=f.vUu('<!> <div class="row"><div class="col-12"><div class="my-2 text-center"> <!> <!></div> <!></div> <div class="col-sm-4"><b>Active Players</b> <ol class="list-unstyled"></ol> <b>Done Players</b> <ol class="list-unstyled"></ol></div> <div class="col-12 col-sm-8"><!></div> <div class="col mt-2"><!> Played Cards <!></div></div> <div> </div> <b>Lobby</b> <!>',1);f.MmH(["click","change"]);var ta=s(101),to=f.vUu('<!> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,s(95).A)(function(e,t){let s;f.VCO(t,!0);let i=new J.Ay,n=new j(i),r=f.unG(()=>n.pastGames),a=f.unG(()=>n.leaderboard),o=f.unG(()=>n.localClient),c=f.unG(()=>n.roundState),h=(0,ta.C)("game/mp/_shared/name","");var l=to(),d=f.esp(l);(0,w.A)(d,{get value(){return h.value},set value($$value){h.value=$$value}});var u=f.hg4(d,2);f.Lcc((0,M.A)(u,{gameId:"president-ftmxqwcwukyisw4waewyua",roomType:"PresidentRoom",get gameRoom(){return n.room},onJoinedRoom:e=>n.enterGame(e,h.value),formatGameMode:e=>S((0,y.e)(b,e)),get roomCreateOptions(){return b}}),e=>s=e,()=>s);var p=f.hg4(u,2);{let e=f.unG(()=>f.JtY(c)===R.mk.INTERMISSION);(0,E.A)(p,{get inGame(){return n.room},get isActive(){return n.localClient.active},get canReady(){return f.JtY(e)},get isReady(){return n.localClient.ready},onActive:()=>n.sendActive(),onReady:()=>n.sendReady(),onReset:()=>n.sendReset(),onDisconnect:()=>(n.leaveGame(),s.refreshRooms()),children:(e,t)=>{!function(e,t){let s;f.VCO(t,!0);let i=f._w2(t,"gameState",7),n=f.unG(()=>i().localClient),r=f.unG(()=>i().roundState),a=f.unG(()=>i().playerInfo),o=f.unG(()=>i().turnIndex),c=f.unG(()=>i().playing),h=f.unG(()=>i().canMove),l=f.unG(()=>i().playerDiscInfo),d=f.unG(()=>i().moveHistory),u=f.unG(()=>i().gamePhase),p=f.unG(()=>i().trickTurn),v=f.unG(()=>i().trickCount),g=f.wk1(!1);var k,N,J,Y,C,w,E=tr(),y=f.esp(E),M=e=>{var t=f.Qq7("Waiting for players…");f.BCw(e,t)},x=e=>{var t=eA(),s=f.esp(t),a=e=>{var t=f.Qq7("Intermission:");f.BCw(e,t)},o=e=>{var t=f.Imx(),s=f.esp(t),i=e=>{var t=f.Qq7("Make a move:");f.BCw(e,t)},r=e=>{var t=f.Imx(),s=f.esp(t),i=e=>{var t=f.Qq7("Waiting for opponent to move…");f.BCw(e,t)},r=e=>{var t=f.Qq7("Spectating:");f.BCw(e,t)};f.if(s,e=>{f.JtY(n).inRound?e(i):e(r,!1)},!0),f.BCw(e,t)};f.if(s,e=>{f.JtY(h)?e(i):e(r,!1)},!0),f.BCw(e,t)};f.if(s,e=>{f.JtY(r)===R.mk.INTERMISSION?e(a):e(o,!1)});var c=f.hg4(s,2);(0,eI.A)(c,{get startTime(){return i().roundTimerStart},get endTime(){return i().roundTimerEnd},get active(){return i().room}}),f.BCw(e,t)};f.if(y,e=>{f.JtY(r)===R.mk.WAITING?e(M):e(x,!1)});var P=f.hg4(y,2),A=f.jfp(P),U=f.jfp(A),_=f.jfp(U),b=f.hg4(_),B=e=>{var t=eU(),s=f.esp(t),n=f.hg4(s),r=f.jfp(n,!0);f.cLc(n);var a=f.hg4(n),o=f.hg4(a),c=e=>{var t=f.Qq7("-1");f.BCw(e,t)};f.if(o,e=>{i().trick1Fewer&&e(c)}),f.vNg(()=>{f.jax(s,`Move ${f.JtY(p)??""}: `),f.jax(r,eP[i().trickRank]),f.jax(a,` \xd7${f.JtY(v)??""}`)}),f.BCw(e,t)},L=e=>{var t=f.Qq7("Move 0");f.BCw(e,t)};f.if(b,e=>{f.JtY(p)?e(B):e(L,!1)});var G=f.hg4(b,2),O=e=>{var t=f.Imx(),s=f.esp(t),n=e=>{var t=e_();f.BCw(e,t)},r=e=>{var t=eb();f.BCw(e,t)};f.if(s,e=>{i().revolution?e(n):e(r,!1)}),f.BCw(e,t)};f.if(G,e=>{i().mode.optRev&&e(O)}),f.cLc(U);var j=f.hg4(U,2),D=e=>{let t=f.unG(()=>f.JtY(g)?el:eu);var s=e8(),r=f.esp(s),c=f.jfp(r),l=f.jfp(c);f.R0j(l),f.K2T(2),f.cLc(c);var d=f.hg4(c,2);f.s9R(d,()=>f.JtY(t),(e,t)=>{t(e,{get ranks(){return eP},get cards(){return i().cardCountMine}})}),f.cLc(r);var k=f.hg4(r,2),N=e=>{let t=f.unG(()=>2&i().giveFlags&&i().pres>=0),s=f.unG(()=>1&i().giveFlags&&i().vicePres>=0),r=f.unG(()=>f.JtY(t)&&f.JtY(a)[i().pres].owner===f.JtY(n).cn),o=f.unG(()=>f.JtY(s)&&f.JtY(a)[i().vicePres].owner===f.JtY(n).cn);var c=e$(),h=f.jfp(c),l=e=>{let t=f.unG(()=>i().cardCountMine[i().give0]&&(f.JtY(o)||i().cardCountMine[i().give1]&&!(i().give0===i().give1&&i().cardCountMine[i().give0]<2)));var s=eO(),n=f.esp(s),a=f.hg4(f.jfp(n)),c=f.jfp(a,!0);f.cLc(a);var h=f.hg4(a,2),l=e=>{var t=eS(),s=f.hg4(f.esp(t)),n=f.jfp(s,!0);f.cLc(s),f.vNg(()=>f.jax(n,eP[i().take1])),f.BCw(e,t)};f.if(h,e=>{f.JtY(r)&&e(l)});var d=f.hg4(h);f.cLc(n);var u=f.hg4(n,2);{let e,s=(e,t=f.lQ1)=>{var s=eL();f.__1(s,21,()=>({length:I.NUM}),f.Pe0,(e,t,s)=>{let n=f.unG(()=>i().cardCountMine[s]);var r=f.Imx(),a=f.esp(r),o=e=>{var t=eB(),i=f.jfp(t);f.cLc(t),t.value=t.__value=s,f.vNg(()=>f.jax(i,`${eP[s]??""} (${f.JtY(n)??""})`)),f.BCw(e,t)};f.if(a,e=>{f.JtY(n)&&e(o)}),f.BCw(e,r)}),f.cLc(s),f.$ty(s,()=>i()[t()],e=>i()[t()]=e),f.BCw(e,s)};var p=f.jfp(u);s(p,()=>"give0");var v=f.hg4(p,2),g=e=>{s(e,()=>"give1")};f.if(v,e=>{f.JtY(r)&&e(g)});var k=f.hg4(v,2);k.__click=[eG,i],f.cLc(u),f.vNg(s=>e=f.ysU(k,1,`btn btn-${f.JtY(t)?"primary":"outline-secondary"}`,null,e,s),[()=>({disabled:!f.JtY(t)})])}f.vNg(e=>{f.jax(c,eP[i().take0]),f.jax(d,` from the ${f.JtY(r)?"Scum":"High-Scum"}. Give back ${f.JtY(r)?"two cards":"a card"}:`)},[()=>({disabled:!f.JtY(t)})]),f.BCw(e,s)};f.if(h,e=>{(f.JtY(r)||f.JtY(o))&&e(l)});var d=f.hg4(h,2),u=e=>{var t=ej();f.BCw(e,t)};f.if(d,e=>{f.JtY(t)&&e(u)});var p=f.hg4(d,2),v=e=>{var t=eD();f.BCw(e,t)};f.if(p,e=>{f.JtY(s)&&e(v)}),f.cLc(c),f.BCw(e,c)},J=e=>{var t=f.Imx(),s=f.esp(t),n=e=>{let t=f.unG(()=>i().pendingMoveRank<0),s=f.unG(()=>-2===f.JtY(a)[f.JtY(o)].role),n=f.unG(()=>f.JtY(t)?f.JtY(p):i().allowRank(i().pendingMoveRank,f.JtY(s))),r=f.unG(()=>f.JtY(n)?"":"outline-"),c=f.unG(()=>i().revolution?I.N3:I.N2),h=f.unG(()=>i().mode.opt1Fewer2&&f.JtY(p)&&f.JtY(v)>1);var l=e6(),d=f.esp(l),g=f.hg4(f.jfp(d)),k=e=>{var t=eF();f.vNg(()=>f.ysU(t,1,`badge text-bg-${f.JtY(p)?"":"outline-"}danger`)),f.BCw(e,t)},N=e=>{let t=f.unG(()=>i().pendingMoveRankAck===I.Joker?f.JtY(c):i().pendingMoveRankAck);var s=eV(),a=f.esp(s),o=f.jfp(a,!0);f.cLc(a);var h=f.hg4(a),l=f.hg4(h),d=e=>{var t=f.Qq7();f.vNg(()=>f.jax(t,`+${i().pendingMoveJokersAck??""}`)),f.BCw(e,t)};f.if(l,e=>{i().pendingMoveJokersAck&&e(d)});var u=f.hg4(l,2),p=f.jfp(u,!0);f.cLc(u),f.vNg(()=>{f.ysU(a,1,`badge text-bg-${f.JtY(r)??""}light`),f.jax(o,eP[f.JtY(t)]),f.jax(h,` \xd7${i().pendingMoveBaseAck??""}`),f.ysU(u,1,`badge text-bg-outline-${f.JtY(n)?"success":"danger"}`),f.jax(p,f.JtY(n)?"OK":"INVALID")}),f.BCw(e,s)};f.if(g,e=>{i().pendingMoveRankAck<0?e(k):e(N,!1)}),f.cLc(d);var J=f.hg4(d,2);{let e,n=(e,t=f.lQ1)=>{let n,r=f.unG(()=>t()==I.Joker?f.JtY(c):t()),a=f.unG(()=>i().cardCountMine[f.JtY(r)]);var o=eZ();o.__click=[ez,i,t,a,c];var l=f.jfp(o);f.cLc(o),f.vNg((e,s)=>{n=f.ysU(o,1,`fw-bold w-100 btn btn-${i().pendingMoveRankAck===t()?"":"outline-"}${e??""}`,null,n,s),f.jax(l,`${eP[f.JtY(r)]??""}${f.JtY(h)&&t()===f.JtY(c)?"-":""}`)},[()=>(f.JtY(a)?["warning","info","success","primary"]:["danger","secondary"])[i().allowRank(t(),f.JtY(s))],()=>({active:i().pendingMoveRank===t()})]),f.BCw(e,o)};var Y=f.jfp(J);Y.__click=[eq,i];var C=f.hg4(Y,2),w=e=>{n(e,()=>I.Joker)};f.if(C,e=>{f.JtY(h)&&i().revolution&&e(w)});var E=f.hg4(C,2);f.__1(E,17,()=>({length:I.Joker}),f.Pe0,(e,t,s)=>{n(e,()=>s)});var y=f.hg4(E,2),M=e=>{n(e,()=>I.Joker)};f.if(y,e=>{f.JtY(h)&&!i().revolution&&e(M)}),f.cLc(J),f.vNg(t=>e=f.ysU(Y,1,`fw-bold w-100 btn btn-${i().pendingMoveRankAck<0?"":"outline-"}${f.JtY(p)?"danger":"secondary"}`,null,e,t),[()=>({active:f.JtY(t)})])}var R=f.hg4(J,4),T=e=>{var t=f.Imx(),s=f.esp(t),i=e=>{var t=eK();f.BCw(e,t)},n=e=>{var t=eH();f.BCw(e,t)};f.if(s,e=>{f.JtY(p)?e(i):e(n,!1)}),f.BCw(e,t)},x=e=>{var t=f.Imx(),s=f.esp(t),r=e=>{let t=f.unG(()=>i().pendingMoveRank===I.Joker?f.JtY(c):i().pendingMoveRank),s=f.unG(()=>f.JtY(h)&&i().pendingMoveRank===f.JtY(c)),n=f.unG(()=>i().cardCountMine[f.JtY(t)]),r=f.unG(()=>i().cardCountMine[I.Joker]),a=f.unG(()=>f.JtY(v)-(f.JtY(s)?1n:0n)),o=f.unG(()=>f.JtY(p)?f.JtY(a):1n),l=f.unG(()=>f.JtY(o)>f.JtY(n)?f.JtY(o)-f.JtY(n):0),d=f.unG(()=>f.JtY(p)&&f.JtY(r)>f.JtY(a)?f.JtY(a):f.JtY(r));var g=e4(),k=f.esp(g),N=e=>{let t=f.unG(()=>f.JtY(r)&&f.JtY(u)!==m.PLAYING_MUST_3?0:1),s=f.unG(()=>Number(f.JtY(n)));var a=f.Imx(),o=f.esp(a),c=e=>{var n=eX(),r=f.hg4(f.jfp(n));f.R0j(r),r.__change=[eQ,i];var a=f.hg4(r,2);f.R0j(a),a.__change=[eW,i],f.cLc(n),f.vNg(()=>{f.ysU(r,1,`form-control is-${i().pendingMoveBase===i().pendingMoveBaseAck?"":"in"}valid`),f.aIK(r,"min",f.JtY(t)),f.aIK(r,"max",f.JtY(s)),f.aIK(a,"min",f.JtY(t)),f.aIK(a,"max",f.JtY(s))}),f.oJB(r,()=>i().pendingMoveBase,e=>i().pendingMoveBase=e),f.oJB(a,()=>i().pendingMoveBase,e=>i().pendingMoveBase=e),f.BCw(e,n)};f.if(o,e=>{f.JtY(t)<f.JtY(s)&&e(c)}),f.BCw(e,a)};f.if(k,e=>{f.JtY(p)||e(N)});var J=f.hg4(k,2),Y=e=>{let t=f.unG(()=>f.JtY(l).toString()),s=f.unG(()=>f.JtY(d).toString());var n=e2(),r=f.hg4(f.jfp(n));f.R0j(r),r.__change=[e1,i];var a=f.hg4(r,2);f.R0j(a),a.__change=[e0,i],f.cLc(n),f.vNg(()=>{f.ysU(r,1,`form-control is-${i().pendingMoveJokers===i().pendingMoveJokersAck?"":"in"}valid`),f.aIK(r,"min",f.JtY(t)),f.aIK(r,"max",f.JtY(s)),f.aIK(a,"min",f.JtY(t)),f.aIK(a,"max",f.JtY(s))}),f.oJB(r,()=>i().pendingMoveJokers,e=>i().pendingMoveJokers=e),f.oJB(a,()=>i().pendingMoveJokers,e=>i().pendingMoveJokers=e),f.BCw(e,n)};f.if(J,e=>{f.JtY(l)<f.JtY(d)&&e(Y)}),f.K2T(2),f.BCw(e,g)},a=e=>{var t=e3(),s=f.hg4(f.jfp(t)),i=e=>{var t=f.Qq7("You must play 3 on the first trick.");f.BCw(e,t)};f.if(s,e=>{f.JtY(u)===m.PLAYING_MUST_3&&e(i)}),f.cLc(t),f.BCw(e,t)};f.if(s,e=>{f.JtY(n)?e(r):e(a,!1)}),f.BCw(e,t)};f.if(R,e=>{f.JtY(t)?e(T):e(x,!1)});var P=f.hg4(R,2);f.jfp(P).__click=[e7,i],f.cLc(P),f.BCw(e,l)};f.if(s,e=>{f.JtY(h)&&e(n)},!0),f.BCw(e,t)};f.if(k,e=>{f.JtY(u)===m.GIVE_CARDS?e(N):e(J,!1)}),f.mST(l,()=>f.JtY(g),e=>f.hZp(g,e)),f.BCw(e,s)};f.if(j,e=>{f.JtY(r)===R.mk.ACTIVE&&f.JtY(c)&&e(D)}),f.cLc(A);var $=f.hg4(A,2),F=f.hg4(f.jfp($),2);f.__1(F,21,()=>f.JtY(a),f.Pe0,(e,t,s)=>{let n=f.unG(()=>i().playerIsMe(f.JtY(t))),r=f.unG(()=>f.JtY(n)?"":"-outline");var c=tt(),h=f.esp(c),l=e=>{var t=e5();f.BCw(e,t)};f.if(h,e=>{s===i().passIndex&&f.JtY(a).length>1&&e(l)});var d=f.hg4(h,2),u=f.jfp(d),p=f.jfp(u,!0);f.cLc(u);var v=f.hg4(u,2),g=e=>{var t=e9();f.vNg(()=>f.ysU(t,1,`badge text-bg${f.JtY(r)??""}-primary`)),f.BCw(e,t)};f.if(v,e=>{s===f.JtY(o)&&e(g)});var k=f.hg4(v,2),m=e=>{var t=te();f.vNg(()=>f.ysU(t,1,`badge text-bg${f.JtY(r)??""}-danger`)),f.BCw(e,t)};f.if(k,e=>{f.JtY(t).passed&&e(m)});var I=f.hg4(k),N=f.hg4(I),J=e=>{!function(e,t){let s=f._w2(t,"solid",3,!1);var i=K(),n=f.jfp(i,!0);f.cLc(i),f.vNg((e,t)=>{f.ysU(i,1,e),f.jax(n,t)},[()=>f.$z$(q(t.role,s())),()=>Z(t.role)]),f.BCw(e,i)}(e,{get role(){return f.JtY(t).role}})};f.if(N,e=>{f.JtY(t).role&&e(J)}),f.cLc(d),f.vNg(e=>{f.ysU(u,1,`badge text-bg${f.JtY(r)??""}-${R.mk.ACTIVE&&s===f.JtY(o)?"primary":"secondary"}`),f.jax(p,e),f.jax(I,` ${f.JtY(t).handSize??""} `)},[()=>i().formatPlayerName(f.JtY(t))]),f.BCw(e,c)},e=>{var t=ts();f.BCw(e,t)}),f.cLc(F);var V=f.hg4(F,4);f.__1(V,21,()=>f.JtY(l),f.Pe0,(e,t,s)=>{var n=ti(),r=f.jfp(n),o=f.hg4(r);X(o,f.DuQ({get name(){return f.JtY(t).ownerName}},()=>f.JtY(t)));var c=f.hg4(o);f.cLc(n),f.vNg(e=>{f.jax(r,`#${s+(s>=i().discIndex?1+f.JtY(a).length:1)}: `),f.jax(c,` (${f.JtY(t).hand[I.NUM]?"left "+f.JtY(t).hand[I.NUM]:"won"}) on ${f.JtY(t).trickNum??""}:${f.JtY(t).trickTurn??""} in ${e??""}`)},[()=>(0,T.a3)(f.JtY(t).duration)]),f.BCw(e,n)},e=>{var t=tn();f.BCw(e,t)}),f.cLc(V),f.cLc($);var z=f.hg4($,2);k=f.jfp(z),N={get moves(){return f.JtY(d)}},f.VCO(N,!0),s=f.wk1(!0),J=ex(),Y=f.hg4(f.esp(J),2),C=f.jfp(Y),f.R0j(C),f.K2T(2),f.cLc(Y),w=f.hg4(Y,2),f.__1(w,21,()=>N.moves,f.Pe0,(e,t)=>{let i;var n=eT(),r=f.esp(n),a=f.jfp(r),o=e=>{var s=eJ(),i=f.esp(s),n=f.hg4(i),r=f.jfp(n,!0);f.cLc(n);var a=f.hg4(n,2),o=e=>{var s=eN(),i=f.hg4(f.esp(s)),n=f.jfp(i,!0);f.cLc(i),f.vNg(()=>f.jax(n,eP[f.JtY(t).card1])),f.BCw(e,s)};f.if(a,e=>{void 0!=f.JtY(t).card1&&e(o)});var c=f.hg4(a),h=f.hg4(c),l=f.jfp(h,!0);f.cLc(h),f.K2T(),f.vNg(()=>{f.jax(i,`(You
        ${"give"==f.JtY(t).type?"took":"gave"} `),f.jax(r,eP[f.JtY(t).card0]),f.jax(c,` ${"give"==f.JtY(t).type?"from":"to"} `),f.jax(l,f.JtY(t).playerName)}),f.BCw(e,s)},c=e=>{var s=f.Imx(),i=f.esp(s),n=e=>{var s=f.Qq7();f.vNg(()=>f.jax(s,`[${f.JtY(t).trick??""}:${f.JtY(t).turn??""} end${f.JtY(t).move?" by pass":""}]`)),f.BCw(e,s)},r=e=>{let s=f.unG(()=>f.JtY(t).playerIsMe?"":"-outline");var i=eR(),n=f.esp(i),r=f.jfp(n,!0);f.cLc(n);var a=f.hg4(n,2),o=e=>{var s=eC(),i=f.hg4(f.esp(s)),n=f.jfp(i,!0);f.cLc(i);var r=f.hg4(i),a=e=>{var s=eY(),i=f.esp(s),n=f.hg4(i),r=e=>{var s=f.Qq7();f.vNg(()=>f.jax(s,`+${f.JtY(t).jokers??""}`)),f.BCw(e,s)};f.if(n,e=>{f.JtY(t).jokers&&e(r)}),f.vNg(()=>f.jax(i,` \xd7${f.JtY(t).base??""}`)),f.BCw(e,s)};f.if(r,e=>{(1!=f.JtY(t).base||f.JtY(t).jokers)&&e(a)}),f.K2T(),f.vNg(()=>f.jax(n,eP[f.JtY(t).rank])),f.BCw(e,s)},c=e=>{var s=f.Imx(),i=f.esp(s),n=e=>{var t=f.Qq7("passed.");f.BCw(e,t)},r=e=>{var s=f.Imx(),i=f.esp(s),n=e=>{let s=f.unG(()=>f.JtY(t).targetIsMe?"":"-outline");var i=ew(),n=f.esp(i),r=f.hg4(n),a=f.jfp(r,!0);f.cLc(r),f.K2T(),f.vNg(()=>{f.jax(n,`gave ${f.JtY(t).cardCount??""} card${1==f.JtY(t).cardCount?"":"s"} to `),f.ysU(r,1,`badge text-bg${f.JtY(s)??""}-secondary`),f.jax(a,f.JtY(t).targetName)}),f.BCw(e,i)},r=e=>{var s=f.Imx(),i=f.esp(s),n=e=>{var s=ey(),i=f.hg4(f.esp(s)),n=f.jfp(i,!0);f.cLc(i);var r=f.hg4(i,2),a=e=>{var s=eE(),i=f.hg4(f.esp(s)),n=f.jfp(i,!0);f.cLc(i),f.vNg(()=>f.jax(n,eP[f.JtY(t).card1])),f.BCw(e,s)};f.if(r,e=>{void 0!=f.JtY(t).card1&&e(a)}),f.K2T(),f.vNg(()=>f.jax(n,eP[f.JtY(t).card0])),f.BCw(e,s)},r=e=>{var s=f.Imx(),i=f.esp(s),n=e=>{var s=f.Imx(),i=f.esp(s),n=e=>{var s=eM();eu(f.hg4(f.esp(s)),{get ranks(){return eP},get cards(){return f.JtY(t).cards}}),f.BCw(e,s)},r=e=>{var t=f.Qq7("won.");f.BCw(e,t)};f.if(i,e=>{f.JtY(t).cards[I.NUM]?e(n):e(r,!1)}),f.BCw(e,s)},r=e=>{var s=f.Qq7();f.vNg(()=>f.jax(s,`[unknown move ${f.JtY(t)??""}]`)),f.BCw(e,s)};f.if(i,e=>{"leave"==f.JtY(t).type?e(n):e(r,!1)},!0),f.BCw(e,s)};f.if(i,e=>{"discard"==f.JtY(t).type?e(n):e(r,!1)},!0),f.BCw(e,s)};f.if(i,e=>{"give_public"==f.JtY(t).type?e(n):e(r,!1)},!0),f.BCw(e,s)};f.if(i,e=>{"pass"==f.JtY(t).type?e(n):e(r,!1)},!0),f.BCw(e,s)};f.if(a,e=>{"move"==f.JtY(t).type?e(o):e(c,!1)}),f.vNg(()=>{f.ysU(n,1,`badge text-bg${f.JtY(s)??""}-primary`),f.jax(r,f.JtY(t).playerName)}),f.BCw(e,i)};f.if(i,e=>{"tEnd"==f.JtY(t).type?e(n):e(r,!1)},!0),f.BCw(e,s)};f.if(a,e=>{"give"==f.JtY(t).type||"take"==f.JtY(t).type?e(o):e(c,!1)}),f.cLc(r),f.hg4(r).nodeValue="  ",f.vNg(e=>i=f.ysU(r,1,"",null,i,e),[()=>({"d-inline-block":f.JtY(s)})]),f.BCw(e,n)},e=>{f.K2T();var t=f.Qq7("No moves yet!");f.BCw(e,t)}),f.cLc(w),f.mST(C,()=>f.JtY(s),e=>f.hZp(s,e)),f.BCw(k,J),f.uYY(),f.cLc(z);var H=f.hg4(z,2),Q=f.jfp(H);{let e=f.unG(()=>[["You",i().cardCountMine],["Others",i().cardCountOthers],["Played",i().cardCountDiscard],["Total",i().cardCountTotal]]);em(Q,{get ranks(){return eP},get counts(){return f.JtY(e)}})}var W=f.hg4(Q,2);{let e=f.unG(()=>Array.from(function*(){for(let e of f.JtY(a))yield[i().clients[e.owner].formatName(),e.discarded];for(let e of f.JtY(l))e.discarded[I.NUM]&&(yield[e.ownerName+" (used)",e.discarded]),e.hand[I.NUM]&&(yield[e.ownerName+" (hand)",e.hand])}()));em(W,{get ranks(){return eP},get counts(){return f.JtY(e)}})}f.cLc(H),f.cLc(P);var ee=f.hg4(P,2),et=f.jfp(ee);f.cLc(ee);var es=f.hg4(ee,4);(0,ef.A)(es,{get localClient(){return i().localClient},get inGame(){return i().roundPlayers},get inQueue(){return i().roundPlayerQueue}}),f.vNg(e=>{f.jax(_,`Trick ${i().trickNum??""} `),f.jax(et,`Game Mode: ${e??""}`)},[()=>S(i().mode)]),f.BCw(e,E),f.uYY()}(e,{get gameState(){return n}})},$$slots:{default:!0}})}var v=f.hg4(p,2),g=f.jfp(v),k=f.jfp(g);(0,Y.A)(k,{get canClear(){return f.JtY(r).length},onClear:()=>n.clearHistory(),children:(e,t)=>{var s,i;s={get results(){return f.JtY(r)}},f.VCO(s,!0),i=ei(),f.__1(i,21,()=>s.results,f.Pe0,(e,t)=>{var s=et(),i=f.jfp(s),n=f.jfp(i),r=f.hg4(n);f.__1(r,17,()=>f.JtY(t).players,f.Pe0,(e,t,s)=>{f.K2T();var i=ee(),n=f.esp(i);n.nodeValue="  ";var r=f.hg4(n),a=f.jfp(r);a.nodeValue=`#${s+1} `;var o=f.hg4(a);X(o,f.DuQ(()=>f.JtY(t)));var c=f.hg4(o);f.cLc(r),f.vNg(e=>f.jax(c,` (on ${f.JtY(t).trickNum??""}:${f.JtY(t).trickTurn??""} in ${e??""})`),[()=>(0,T.a3)(f.JtY(t).duration)]),f.BCw(e,i)}),f.cLc(i),f.cLc(s),f.vNg(e=>f.jax(n,`Turn ${f.JtY(t).trickNum??""}:${f.JtY(t).trickTurn??""} in ${e??""}: `),[()=>(0,T.a3)(f.JtY(t).duration)]),f.BCw(e,s)},e=>{var t=es();f.BCw(e,t)}),f.cLc(i),f.BCw(e,i),f.uYY()},$$slots:{default:!0}});var x=f.hg4(k,2);(0,C.A)(x,{get leaderboard(){return f.JtY(a)},get localClient(){return f.JtY(o)},columns:[["Score",e=>e.score],["Streak",e=>e.streak],["President",e=>e.roleCount[4]],["VP",e=>e.roleCount[3]],["Neutral",e=>e.roleCount[2]],["HS",e=>e.roleCount[1]],["Scum",e=>e.roleCount[0]]]}),f.cLc(g);var P=f.hg4(g,2),A=f.jfp(P);(0,N.A)(A,{get chatState(){return i},onInput:e=>(0,J.Oo)(n,e)}),f.cLc(P),f.cLc(v),f.BCw(e,l),f.uYY()})},127:function(e,t,s){s.d(t,{M0:()=>c,a3:()=>h,iq:()=>n,iw:()=>r,yh:()=>o,yn:()=>a});var i=s(128);let n=64;function r(e){return(e=e.replace(/[^a-zA-Z_ ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function a(){let e=new i.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",e.debugBuf,e),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function o(e,t){let s=e.filter(e=>e).sort((e,s)=>{for(let i of t){let t=i(e),n=i(s);if(t<n)return 1;if(t>n)return -1}return e.cn-s.cn}),i=1;return s.forEach((e,n)=>{if(n){let r=s[n-1];t.some(t=>t(e)!==t(r))&&(i=n+1)}s[n].rank=i}),s.sort((e,t)=>t.active-e.active)}function c(e,t){return e?`${e.name} (${e.cn})`:`<unknown${void 0===t?"":` (${t})`}>`}function h(e){let t=Number(e%1000n);return`${e/1000n}${(t/1e3+"").slice(1)}s`}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.m=e,s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];s.O=(t,i,n,r)=>{if(i){r=r||0;for(var a=e.length;a>0&&e[a-1][2]>r;a--)e[a]=e[a-1];e[a]=[i,n,r];return}for(var o=1/0,a=0;a<e.length;a++){for(var[i,n,r]=e[a],c=!0,h=0;h<i.length;h++)(!1&r||o>=r)&&Object.keys(s.O).every(e=>s.O[e](i[h]))?i.splice(h--,1):(c=!1,r<o&&(o=r));if(c){e.splice(a--,1);var l=n();void 0!==l&&(t=l)}}return t}})(),s.rv=()=>"1.5.1",(()=>{var e={92:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var n,r,[a,o,c]=i,h=0;if(a.some(t=>0!==e[t])){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(c)var l=c(s)}for(t&&t(i);h<a.length;h++)r=a[h],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(l)},i=self.webpackChunkvwww=self.webpackChunkvwww||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.ruid="bundler=rspack@1.5.1";var i=s.O(void 0,["1","2","5","13","28","17","29","35","37","41","36","34"],function(){return s(136)});i=s.O(i)})();