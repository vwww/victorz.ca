(()=>{"use strict";var e={142:function(e,t,r){r(1);var n=r(2);function a(e,t,r=!1){let l=n.wk1(n.BXG(t));function o(e){return"undefined"===e?void 0:JSON.parse(e)}if(window.localStorage){let a=localStorage.getItem(e);null!==a&&n.hZp(l,o(a),!0),n.MWq(()=>localStorage.setItem(e,void 0===n.JtY(l)?"undefined":JSON.stringify(n.JtY(l)))),r&&window.addEventListener("storage",r=>r.storageArea===localStorage&&r.key===e&&n.hZp(l,null==r.newValue?t:o(r.newValue),!0))}return{get value(){return n.JtY(l)},set value(newVal){n.hZp(l,newVal,!0)}}}var l=n.vUu('<div role="progressbar"></div>');function o(e,t){let r=n.unG(()=>Math.max(t.moment,0)/t.momentMax*100),a=n.unG(()=>20>=n.JtY(r)?"bg-success":40>=n.JtY(r)?"bg-info":60>=n.JtY(r)?"":80>=n.JtY(r)?"bg-warning":"bg-danger");var o=l();n.aIK(o,"aria-valuemin",0),n.vNg(()=>{n.ysU(o,1,`progress-bar progress-bar-striped progress-bar-animated ${n.JtY(a)??""}`),n.aIK(o,"aria-valuenow",t.moment),n.aIK(o,"aria-valuemax",t.momentMax),n.hgi(o,`width: ${n.JtY(r)??""}%`)}),n.BCw(e,o)}let i=[[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]],[[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[1,0,0,0],[0,0,0,0]]],[[[0,1,1,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]]];function u(e,t,r,a){n.hZp(t,!n.JtY(t)),!n.JtY(t)&&n.JtY(r)&&a()}var s=n.vUu("<td></td>"),c=n.vUu('<tr class="svelte-1u3d4f9"></tr>'),v=n.vUu('<td class="svelte-1u3d4f9"></td>'),f=n.vUu('<tr class="svelte-1u3d4f9"></tr>'),d=n.vUu('<div class="btn-group d-flex svelte-1u3d4f9" role="group"><button class="btn btn-outline-primary w-100 svelte-1u3d4f9">New Game</button> <button>Pause</button> <button>Ghost Piece</button> <button>Speedup</button></div> <p class="svelte-1u3d4f9"> </p> <table class="svelte-1u3d4f9"><tbody class="svelte-1u3d4f9"></tbody></table> <div class="d-flex my-3 svelte-1u3d4f9"><div class="progress w-50 svelte-1u3d4f9" style="transform: scaleX(-1)"><!></div> <div class="progress w-50 svelte-1u3d4f9"><!></div></div> <table class="svelte-1u3d4f9"><tbody class="svelte-1u3d4f9"></tbody></table>',1);let h={hash:"svelte-1u3d4f9",code:"table.svelte-1u3d4f9 {margin:auto;}td.svelte-1u3d4f9 {width:3vmin;height:3vmin;&.ghost {opacity:0.2;}&.ghostLine {\n    animation: svelte-1u3d4f9-blinker 0.5s linear infinite;}}\n\n@keyframes svelte-1u3d4f9-blinker {\n  50% {\n    opacity: 0.4;\n  }\n}"};n.MmH(["click"]);var J=r(5);let p=document.getElementById("app");(0,J.Or)(function(e,t){n.VCO(t,!0),n.kZQ(e,h);let r=["#000","red","orangered","orange","yellow","chartreuse","yellowgreen","lime","limegreen","darkgreen","aquamarine","magenta","orchid"],l=a("game/sp/tetris/showGhost",!0),J=a("game/sp/tetris/speedup",!0),p=a("game/sp/tetris/highscore",0),Y=[...i],g=n.wk1(0),m=n.unG(()=>Y[n.JtY(g)][0]),w=n.wk1((Math.random()*(r.length-1)|0)+1),b=n.wk1(!1),y=n.wk1(!1),k=0,Z=n.BXG(Array.from({length:20},()=>Array(10).fill(0))),x=n.wk1(0),L=n.wk1(0),_=n.wk1(0),O=!1,M=!1,$=!1,j=!1,C=n.wk1(-1),U=-1,G=n.wk1(-1),P=n.wk1(-1),B=n.wk1(20),S=n.wk1(void 0),A=n.wk1(-1),I=n.wk1(-1);function K(){n.hZp(b,!1),clearTimeout(k),k=0}function N(){U=0,n.hZp(G,7*Math.random()|0),n.hZp(S,function(){let e=Y[n.JtY(g)];return n.yoy(g),n.JtY(g)===Y.length&&(n.hZp(g,0),function(e,t=0,r=e.length){for(let n=r-1-t;n!==t;--n){let r=Math.floor(Math.random()*(n+1)),a=e[t+n];e[t+n]=e[t+r],e[t+r]=a}}(Y)),e}(),!0),n.hZp(A,0),n.hZp(I,n.JtY(w),!0),n.hZp(w,(Math.random()*(r.length-1)|0)+1),T(),D(),n.JtY(P)||K()}function E(){let e=U;for(let t=0;t<4;t++,e++){let r=e<0||e>=20,a=n.JtY(G);for(let l=0;l<4;l++,a++){let o=a<0||a>=10;if((r||o||0!==Z[e][a])&&n.JtY(S)[n.JtY(A)][t][l])return!1}}return!0}function T(){let e=U;do if(U++,!E()){U--;break}while(U<20);for(n.hZp(P,U,!0),D(),n.hZp(B,20);n.JtY(B)&&Z[n.JtY(B)-1].every(e=>0!==e);)n.yoy(B,-1);W(0),U=e}function W(e){let t=U;for(let r=0;r<4;r++,t++){if(t<0||t>=20)continue;let a=n.JtY(G);for(let l=0;l<4;l++,a++)a<0||a>=10||!n.JtY(S)[n.JtY(A)][r][l]||(Z[t][a]=e)}}function D(){W(n.JtY(I))}function V(){n.JtY(y)||(J.value&&(n.hZp(C,n.JtY(C)-25e-6*(n.JtY(C)*n.JtY(C))),1>n.JtY(C)&&n.hZp(C,1)),k=window.setTimeout(V,0|n.JtY(C)),function(){n.hZp(L,n.JtY(L)+1),W(0);let e=!1;$&&(n.hZp(A,(n.JtY(A)+1)%n.JtY(S).length),E()?e=!0:n.hZp(A,(n.JtY(A)||n.JtY(S).length)-1)),O!==M&&(n.hZp(G,n.JtY(G)+(O?-1:1)),E()?e=!0:n.hZp(G,n.JtY(G)+(O?1:-1))),e&&T();let t=n.JtY(P)-U;if(U+=Math.min(t,j?3:1),D(),!t&&!e){let e=U;for(let t=0;t<4;t++,e++){if(e<0||e>=20)continue;let r=n.JtY(G);for(let e=0;e<4;e++,r++)r<0||r>=10||!n.JtY(S)[n.JtY(A)][t][e]||n.hZp(x,n.JtY(x)+(5-r-(r>=5)))}n.hZp(L,n.JtY(L)+100);let t=19;for(let e=t;-1!==e;e--)if(Z[e].every(e=>0!==e))n.hZp(L,n.JtY(L)+1e3),n.yoy(_);else{if(t!==e)for(let r=0;r<10;r++)Z[t][r]=Z[e][r];t--}for(;-1!==t;t--)for(let e=0;e<10;e++)Z[t][e]=0;(-69>n.JtY(x)||n.JtY(x)>69?K:N)()}p.value<n.JtY(L)&&(p.value=n.JtY(L))}())}function X(e,t){if(!e.defaultPrevented){switch(e.code){case"KeyS":case"ArrowDown":j=t;break;case"KeyW":case"ArrowUp":$=t;break;case"KeyA":case"ArrowLeft":O=t;break;case"KeyD":case"ArrowRight":M=t;break;default:return}e.preventDefault()}}var q=d();n.f0J("keyup",n.xa8,e=>X(e,!1)),n.f0J("keydown",n.xa8,e=>X(e,!0));var H=n.esp(q),Q=n.jfp(H);Q.__click=function(){for(let e=0;e<20;e++){let t=Z[e];for(let e=0;e<10;e++)t[e]=0}n.hZp(x,0),n.hZp(L,0),n.hZp(_,0),n.hZp(b,!0),n.hZp(y,!1),N(),k&&clearTimeout(k),k=window.setTimeout(V,0),n.hZp(C,200)};var R=n.hg4(Q,2);R.__click=[u,y,b,V];var z=n.hg4(R,2);z.__click=()=>l.value=!l.value;var F=n.hg4(z,2);F.__click=()=>J.value=!J.value,n.cLc(H);var ee=n.hg4(H,2),et=n.jfp(ee);n.cLc(ee);var er=n.hg4(ee,2),en=n.jfp(er);n.__1(en,21,()=>Z,n.Pe0,(e,t,a)=>{var o=c();n.__1(o,21,()=>n.JtY(t),n.Pe0,(e,t,o)=>{let i,u=n.unG(()=>l.value&&!n.JtY(t)&&function(e,t,r,n,a,l){if(Z[a][l]||!e)return!1;let o=e[t],i=a-r;if(i<0||i>=o.length)return!1;let u=o[i],s=l-n;return!(s<0)&&!(s>=u.length)&&!!u[s]}(n.JtY(S),n.JtY(A),n.JtY(P),n.JtY(G),a,o));var c=s();n.vNg(e=>{n.hgi(c,`background-color:${r[n.JtY(t)||(n.JtY(u)?n.JtY(I):0)]??""}`),i=n.ysU(c,1,"svelte-1u3d4f9",null,i,e)},[()=>({ghost:n.JtY(u),ghostLine:l.value&&a>=n.JtY(B)})]),n.BCw(e,c)}),n.cLc(o),n.BCw(e,o)}),n.cLc(en),n.cLc(er);var ea=n.hg4(er,2),el=n.jfp(ea);o(n.jfp(el),{get moment(){return n.JtY(x)},momentMax:69}),n.cLc(el);var eo=n.hg4(el,2),ei=n.jfp(eo);{let e=n.unG(()=>-n.JtY(x));o(ei,{get moment(){return n.JtY(e)},momentMax:69})}n.cLc(eo),n.cLc(ea);var eu=n.hg4(ea,2),es=n.jfp(eu);n.__1(es,21,()=>n.JtY(m),n.Pe0,(e,t)=>{var a=f();n.__1(a,21,()=>n.JtY(t),n.Pe0,(e,t)=>{var a=v();n.vNg(()=>n.hgi(a,`background-color:${r[n.JtY(t)?n.JtY(w):0]??""}`)),n.BCw(e,a)}),n.cLc(a),n.BCw(e,a)}),n.cLc(es),n.cLc(eu),n.vNg(e=>{n.ysU(R,1,`btn w-100 btn-${n.JtY(y)?"":"outline-"}warning`,"svelte-1u3d4f9"),n.ysU(z,1,`btn w-50 btn-${l.value?"":"outline-"}success`,"svelte-1u3d4f9"),n.ysU(F,1,`btn w-50 btn-${J.value?"primary":"outline-secondary"}`,"svelte-1u3d4f9"),n.jax(et,`(${e??""}) |
  Score: ${n.JtY(L)??""} | High Score: ${p.value??""} | Lines cleared: ${n.JtY(_)??""} | Moment: ${!n.JtY(x)?"0":n.JtY(x)>0?n.JtY(x)+" CCW":-n.JtY(x)+" CW"} (69 max)`),n.hgi(er,`backface-visibility: hidden; transform: rotate(${-n.JtY(x)/69*45}deg)`)},[()=>n.JtY(b)?n.JtY(y)?"Paused":(200/(0|n.JtY(C))).toPrecision(3)+"x":"Game over"]),n.BCw(e,q),n.uYY()},{target:p}),document.getElementById("appLoading")?.remove()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,r),l.exports}r.m=e,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];r.O=(t,n,a,l)=>{if(n){l=l||0;for(var o=e.length;o>0&&e[o-1][2]>l;o--)e[o]=e[o-1];e[o]=[n,a,l];return}for(var i=1/0,o=0;o<e.length;o++){for(var[n,a,l]=e[o],u=!0,s=0;s<n.length;s++)(!1&l||i>=l)&&Object.keys(r.O).every(e=>r.O[e](n[s]))?n.splice(s--,1):(u=!1,l<i&&(i=l));if(u){e.splice(o--,1);var c=a();void 0!==c&&(t=c)}}return t}})(),r.rv=()=>"1.5.1",(()=>{var e={98:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[o,i,u]=n,s=0;if(o.some(t=>0!==e[t])){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(u)var c=u(r)}for(t&&t(n);s<o.length;s++)l=o[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(c)},n=self.webpackChunkvwww=self.webpackChunkvwww||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.5.1";var n=r.O(void 0,["1","2","5","4","3","7","8","25","49","46","48"],function(){return r(142)});n=r.O(n)})();