(()=>{"use strict";var t={133:function(t,e,n){n(1);var s,a,i,r,o,l,c,h,d,u,p=n(2),m=n(116),v=n(117),g=n(118),C=n(119),k=n(120),f=n(121),I=n(122),w=n(123),N=n(126);function R(t){return t.reduce((t,e)=>t+e,0n)}var M=n(127),Y=n(130),y=n(129);class T extends N.wG{}class J{#t=p.wk1(-1);get owner(){return p.JtY(this.#t)}set owner(t){p.hZp(this.#t,t,!0)}}class E{isMe;ownerName=""}class x extends N.Nd{#e=p.wk1(p.BXG([]));get playerInfo(){return p.JtY(this.#e)}set playerInfo(t){p.hZp(this.#e,t,!0)}#n=p.wk1(0);get turnIndex(){return p.JtY(this.#n)}set turnIndex(t){p.hZp(this.#n,t,!0)}#s=p.wk1(p.BXG([]));get playerDiscInfo(){return p.JtY(this.#s)}set playerDiscInfo(t){p.hZp(this.#s,t,!0)}discIndex=0;#a=p.unG(()=>this.playing&&this.playerIsMe(this.playerInfo[this.turnIndex]));get canMove(){return p.JtY(this.#a)}set canMove(t){p.hZp(this.#a,t)}formatPlayerName(t,e){return t?(0,M.M0)(this.clients[t.owner],t.owner):`<unknown${void 0===e?"":" pn#"+e}>`}playerIsMe(t){return t?.owner===this.localClient.cn}processWelcomeGame(t){super.processWelcomeGame(t),this.processPlayerInfos(t),this.processDiscInfos(t),this.processRoundInfo(t)}processPlayerInfos(t){let e=[];for(let n=0;n<=this.clients.length;n++){let n=t.getCN();if(n<0)break;let s=new this.PlayerInfoType;s.owner=n,this.processPlayerInfo(t,s),e.push(s)}if((this.playerInfo=e).length){if(this.turnIndex=t.getInt(),this.turnIndex<0||this.turnIndex>=e.length)throw Error("bad turnIndex")}else this.turnIndex=0}processDiscInfos(t){let e=[];for(let n=0;n<=this.clients.length;n++){let n=t.getString(20);if(!n)break;let s=t.getCN(),a=new this.PlayerDiscType;a.ownerName=`${n} (${s})`,this.processDiscInfo(t,a),e.push(a)}if(this.playerDiscInfo=e,this.discIndex=t.getInt(),this.discIndex<0||this.discIndex>this.playerDiscInfo.length)throw Error("bad discIndex")}processRoundStart(t){super.processRoundStart(t);let e=[];for(let n=0;n<=this.clients.length;n++){let n=t.getCN();if(n<0)break;let s=new this.PlayerInfoType;s.owner=n,e.push(s)}this.playerInfo=e,this.playerDiscInfo=[],this.turnIndex=0,this.discIndex=0,this.processRoundStartInfo(t)}processEliminateBase(t,e){let n=t.getInt(),s=this.playerInfo[n];if(!s)throw Error("invalid eliminate pn "+n);let a=new this.PlayerDiscType,i=this.clients[s.owner];if(!i)throw Error(`invalid owner ${s.owner} of pn ${n}`);a.ownerName=(0,M.M0)(i,s.owner),a.isMe=i===this.localClient;let r=this.eliminatePlayer(t,a,n,s,i,e);this.playerInfo.splice(n,1),this.playerDiscInfo.splice(this.discIndex,0,a),r&&this.discIndex++}processEliminate(t){this.processEliminateBase(t,!1)}processEliminateEarly(t){this.processEliminateBase(t,!0)}nextTurn(){++this.turnIndex==this.playerInfo.length&&(this.turnIndex=0)}}let A=[["optTurnTime","i",2e4,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optCallTime","i",3e3,"Call Time / ms","guaranteed time to call cheat, in milliseconds",2e3,1e4],["optDecks","I",1,"Decks","number of decks",1,0x8000000000000],["optCheck","e",2,"Check","how to resolve challenges",["arbiter","caller","public","public+"]],["optTricks","e",0,"Tricks","passing in tricks",["forced (no passing)","pass turn","pass trick","single turn"]],["optCountSame","b",!0,"Count (same)","can play same count as previous move"],["optCountMore","b",!0,"Count (more)","can play more cards than previous move"],["optCountLess","b",!0,"Count (less)","can play fewer cards than previous move, but not zero"],["optCountZero","b",!0,"Count (zero)","can play zero cards"],["optRankStartA","b",!0,"Trick Rank Start (Ace)","can start with Ace"],["optRankStartO","b",!0,"(others)","can start with rank other than Ace or King"],["optRankStartK","b",!0,"(King)","can start with King"],["optRank0","b",!0,"Trick Rank Subsequent (same)","can play same rank as previous move"],["optRank1u","b",!0,"(up 1)","previous plus one, when not wrapping"],["optRank1uw","b",!0,"(up 1 wrap)","previous plus one, when wrapping"],["optRank1d","b",!0,"(down 1)","previous minus one, when not wrapping"],["optRank1dw","b",!0,"(down 1 wrap)","previous minus one, when wrapping"],["optRank2u","b",!1,"(up 2)","previous plus two, when not wrapping"],["optRank2uw","b",!1,"(up 2 wrap)","previous plus two, when wrapping"],["optRank2d","b",!1,"(down 2)","previous minus two, when not wrapping"],["optRank2dw","b",!1,"(down 2 wrap)","previous minus two, when wrapping"],["optRankother","b",!1,"(others)","other ranks not covered above"]];function b(t){let e=t.optCountLess?t.optCountSame?t.optCountMore?"*":"≤":t.optCountMore?"≠":"<":t.optCountSame?t.optCountMore?"≥":"=":">";return t.optCallTime+"/"+t.optTurnTime+"/"+t.optDecks+"/"+t.optCheck+"/"+e+t.optTricks+(t.optRank1uw?"U":"u")+(t.optRank2uw?"U":"u")+(t.optRank2d?"D":"d")+(t.optRank1d?"D":"d")+(t.optRank0?"S":"s")+(t.optRank1u?"U":"u")+(t.optRank2u?"U":"u")+(t.optRank2dw?"D":"d")+(t.optRank1dw?"D":"d")+(t.optRankother?"O":"o")}(s=l||(l={}))[s.WELCOME=0]="WELCOME",s[s.JOIN=1]="JOIN",s[s.LEAVE=2]="LEAVE",s[s.RESET=3]="RESET",s[s.RENAME=4]="RENAME",s[s.PING=5]="PING",s[s.PING_TIME=6]="PING_TIME",s[s.CHAT=7]="CHAT",s[s.ACTIVE=8]="ACTIVE",s[s.ROUND_WAIT=9]="ROUND_WAIT",s[s.ROUND_INTERM=10]="ROUND_INTERM",s[s.ROUND_START=11]="ROUND_START",s[s.READY=12]="READY",s[s.END_ROUND=13]="END_ROUND",s[s.MOVE_CONFIRM=14]="MOVE_CONFIRM",s[s.END_TURN=15]="END_TURN",s[s.CALL_WIN=16]="CALL_WIN",s[s.CALL_FAIL=17]="CALL_FAIL",s[s.PLAYER_ELIMINATE=18]="PLAYER_ELIMINATE",s[s.PLAYER_ELIMINATE_EARLY=19]="PLAYER_ELIMINATE_EARLY",s[s.PLAYER_PRIVATE_INFO_HAND=20]="PLAYER_PRIVATE_INFO_HAND",s[s.PLAYER_PRIVATE_INFO_MOVE=21]="PLAYER_PRIVATE_INFO_MOVE",s[s.PLAYER_PRIVATE_INFO_PENALTY=22]="PLAYER_PRIVATE_INFO_PENALTY",s[s.PLAYER_PRIVATE_INFO_REVEAL=23]="PLAYER_PRIVATE_INFO_REVEAL",(a=c||(c={}))[a.RESET=0]="RESET",a[a.RENAME=1]="RENAME",a[a.PONG=2]="PONG",a[a.CHAT=3]="CHAT",a[a.ACTIVE=4]="ACTIVE",a[a.READY=5]="READY",a[a.MOVE=6]="MOVE",a[a.MOVE_CALL=7]="MOVE_CALL",a[a.MOVE_END=8]="MOVE_END";class L extends T{#i=p.wk1(0);get score(){return p.JtY(this.#i)}set score(t){p.hZp(this.#i,t,!0)}#r=p.wk1(0);get streak(){return p.JtY(this.#r)}set streak(t){p.hZp(this.#r,t,!0)}#o=p.wk1(0);get wins(){return p.JtY(this.#o)}set wins(t){p.hZp(this.#o,t,!0)}#l=p.wk1(0);get losses(){return p.JtY(this.#l)}set losses(t){p.hZp(this.#l,t,!0)}#c=p.wk1(0);get rankLast(){return p.JtY(this.#c)}set rankLast(t){p.hZp(this.#c,t,!0)}#h=p.wk1(0);get rankBest(){return p.JtY(this.#h)}set rankBest(t){p.hZp(this.#h,t,!0)}#d=p.wk1(0);get rankWorst(){return p.JtY(this.#d)}set rankWorst(t){p.hZp(this.#d,t,!0)}updateScore(t,e){this.rankLast=t,this.rankLast=t,this.rankBest=Math.min(this.rankBest||t,t),this.rankWorst=Math.max(this.rankWorst,t),this.score+=e-t+1,1===t?(this.streak<0&&(this.streak=0),this.streak++,this.wins++):(this.streak>0&&(this.streak=0),this.streak--,this.losses++)}resetScore(){this.score=0,this.streak=0,this.wins=0,this.losses=0,this.rankLast=0,this.rankBest=0,this.rankWorst=0}readWelcome(t){super.readWelcome(t),this.score=t.getInt(),this.streak=t.getInt(),this.wins=t.getInt(),this.losses=t.getInt(),this.rankLast=t.getInt(),this.rankBest=t.getInt(),this.rankWorst=t.getInt()}}class U extends J{#u=p.wk1(p.BXG(P()));get discardClaim(){return p.JtY(this.#u)}set discardClaim(t){p.hZp(this.#u,t,!0)}#p=p.wk1(0n);get handSize(){return p.JtY(this.#p)}set handSize(t){p.hZp(this.#p,t,!0)}#m=p.wk1(!1);get passed(){return p.JtY(this.#m)}set passed(t){p.hZp(this.#m,t,!0)}}class B extends E{handSize=0n;trickNum=0;duration=0n}(i=h||(h={}))[i.ARBITER=0]="ARBITER",i[i.CALLER=1]="CALLER",i[i.PUBLIC=2]="PUBLIC",i[i.PUBLIC_ALL=3]="PUBLIC_ALL",i[i.NUM=4]="NUM",(r=d||(d={}))[r.FORCED=0]="FORCED",r[r.PASS_TURN=1]="PASS_TURN",r[r.PASS_TRICK=2]="PASS_TRICK",r[r.SINGLE_TURN=3]="SINGLE_TURN",r[r.NUM=4]="NUM";let _=1n<<51n;class O extends x{PlayerInfoType=U;PlayerDiscType=B;#v=p.wk1(p.BXG((0,I.q)(A)));get mode(){return p.JtY(this.#v)}set mode(t){p.hZp(this.#v,t,!0)}#g=p.wk1(!1);get canChallenge(){return p.JtY(this.#g)}set canChallenge(t){p.hZp(this.#g,t,!0)}#C=p.wk1(!1);get shouldChallenge(){return p.JtY(this.#C)}set shouldChallenge(t){p.hZp(this.#C,t,!0)}#k=p.wk1(0);get trickNum(){return p.JtY(this.#k)}set trickNum(t){p.hZp(this.#k,t,!0)}#f=p.wk1(0);get trickTurn(){return p.JtY(this.#f)}set trickTurn(t){p.hZp(this.#f,t,!0)}#I=p.wk1(0n);get trickCount(){return p.JtY(this.#I)}set trickCount(t){p.hZp(this.#I,t,!0)}#w=p.wk1(0);get trickRank(){return p.JtY(this.#w)}set trickRank(t){p.hZp(this.#w,t,!0)}#N=p.wk1(0);get callTimerStart(){return p.JtY(this.#N)}set callTimerStart(t){p.hZp(this.#N,t,!0)}#R=p.wk1(0);get callTimerEnd(){return p.JtY(this.#R)}set callTimerEnd(t){p.hZp(this.#R,t,!0)}#M=p.wk1(0);get passIndex(){return p.JtY(this.#M)}set passIndex(t){p.hZp(this.#M,t,!0)}#Y=p.wk1(p.BXG(P()));get cardCountTotal(){return p.JtY(this.#Y)}set cardCountTotal(t){p.hZp(this.#Y,t,!0)}#y=p.wk1(p.BXG(P()));get cardCountHandMine(){return p.JtY(this.#y)}set cardCountHandMine(t){p.hZp(this.#y,t,!0)}#T=p.wk1(p.BXG(P()));get cardCountAllMine(){return p.JtY(this.#T)}set cardCountAllMine(t){p.hZp(this.#T,t,!0)}#J=p.unG(()=>this.cardCountTotal.map((t,e)=>t-this.cardCountHandMine[e]));get cardCountAllOthers(){return p.JtY(this.#J)}set cardCountAllOthers(t){p.hZp(this.#J,t)}#E=p.wk1(p.BXG(P()));get cardCountClaimMine(){return p.JtY(this.#E)}set cardCountClaimMine(t){p.hZp(this.#E,t,!0)}#x=p.wk1(p.BXG(P()));get cardCountClaimOthers(){return p.JtY(this.#x)}set cardCountClaimOthers(t){p.hZp(this.#x,t,!0)}#A=p.wk1(p.BXG(P()));get cardCountClaimRemain(){return p.JtY(this.#A)}set cardCountClaimRemain(t){p.hZp(this.#A,t,!0)}#b=p.wk1(p.BXG([]));get moveHistory(){return p.JtY(this.#b)}set moveHistory(t){p.hZp(this.#b,t,!0)}#L=p.wk1(p.BXG(S()));get pendingMoveNum(){return p.JtY(this.#L)}set pendingMoveNum(t){p.hZp(this.#L,t,!0)}#U=p.unG(()=>this.pendingMoveNum.map(BigInt));get pendingMoveNumB(){return p.JtY(this.#U)}set pendingMoveNumB(t){p.hZp(this.#U,t)}#B=p.unG(()=>R(this.pendingMoveNumB));get pendingMoveTotal(){return p.JtY(this.#B)}set pendingMoveTotal(t){p.hZp(this.#B,t)}#_=p.wk1(p.BXG(P()));get pendingMoveAck(){return p.JtY(this.#_)}set pendingMoveAck(t){p.hZp(this.#_,t,!0)}#O=p.wk1(0);get pendingMoveClaim(){return p.JtY(this.#O)}set pendingMoveClaim(t){p.hZp(this.#O,t,!0)}#P=p.wk1(0);get pendingMoveClaimAck(){return p.JtY(this.#P)}set pendingMoveClaimAck(t){p.hZp(this.#P,t,!0)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;newClient(){return new L}enterGame(t,e){this.setupGame(t),this.sendf("is",this.PROTOCOL_VERSION,e)}sendReset(){this.sendf("i",c.RESET)}sendRename(t){this.sendf("is",c.RENAME,t)}sendPong(t){this.sendf("i2",c.PONG,t)}sendChat(t,e,n=-1){this.sendf("i3s",c.CHAT,e,n,(0,y.JK)(t))}sendActive(){this.sendf("i",c.ACTIVE)}sendReady(){this.sendf("i",c.READY)}sendMove(){var t;let e=new Y.U().putInt(c.MOVE).putInt(this.pendingMoveClaim);t=e,this.pendingMoveNumB.forEach(e=>t.putUint64(e)),this.room?.send(e.toArray())}sendMoveCallCheat(){this.sendf("i",c.MOVE_CALL)}sendMoveEnd(){this.sendf("i",c.MOVE_END)}MESSAGE_HANDLERS={[l.WELCOME]:this.processWelcome,[l.JOIN]:this.processJoin,[l.LEAVE]:this.processLeave,[l.RESET]:this.processReset,[l.RENAME]:this.processRename,[l.PING]:this.processPing,[l.PING_TIME]:this.processPingTime,[l.CHAT]:this.processChat,[l.ACTIVE]:this.processActive,[l.ROUND_WAIT]:this.processRoundWait,[l.ROUND_INTERM]:this.processRoundInterm,[l.ROUND_START]:this.processRoundStart,[l.READY]:this.processReady,[l.END_ROUND]:this.processEndRound,[l.MOVE_CONFIRM]:this.processMoveConfirm,[l.END_TURN]:this.processEndTurn,[l.CALL_WIN]:this.processCallWin,[l.CALL_FAIL]:this.processCallFail,[l.PLAYER_ELIMINATE]:this.processEliminate,[l.PLAYER_ELIMINATE_EARLY]:this.processEliminateEarly,[l.PLAYER_PRIVATE_INFO_HAND]:this.processPrivateInfoHand,[l.PLAYER_PRIVATE_INFO_MOVE]:this.processPrivateInfoMove,[l.PLAYER_PRIVATE_INFO_PENALTY]:this.processPrivateInfoPenalty,[l.PLAYER_PRIVATE_INFO_REVEAL]:this.processPrivateInfoResult};processWelcomeMode(t){var e;this.mode.optTurnTime=t.getInt(),this.mode.optCallTime=t.getInt(),this.mode.optDecks=(e=t.getUint64(),1n>e?1n:e<_?e:_);let n=t.get(),s=t.get(),a=t.get();this.mode.optCheck=3&n,this.mode.optTricks=n>>2&3,this.mode.optCountSame=!!(16&n),this.mode.optCountMore=!!(32&n),this.mode.optCountLess=!!(64&n),this.mode.optCountZero=!!(128&n),this.mode.optRankStartA=!!(1&s),this.mode.optRankStartO=!!(2&s),this.mode.optRankStartK=!!(4&s),this.mode.optRank0=!!(8&s),this.mode.optRank1u=!!(16&s),this.mode.optRank1uw=!!(32&s),this.mode.optRank1d=!!(64&s),this.mode.optRank1dw=!!(128&s),this.mode.optRank2u=!!(1&a),this.mode.optRank2uw=!!(2&a),this.mode.optRank2d=!!(4&a),this.mode.optRank2dw=!!(8&a),this.mode.optRankother=!!(16&a)}processPlayerInfo(t,e){e.discardClaim=G(t);let n=t.getUint64();e.handSize=n>>1n,e.passed=!!(1n&n)}processDiscInfo(t,e){e.handSize=t.getUint64(),e.trickNum=t.getInt(),e.duration=t.getUint64()}processRoundStartInfo(t){let e=54n*this.mode.optDecks,n=BigInt(this.roundPlayers.length),s=e/n,a=e%n;this.playerInfo.forEach((t,e)=>{t.discardClaim=P(),t.handSize=s,e<a&&t.handSize++,t.passed=!1}),this.canChallenge=!1,this.trickNum=this.trickTurn=0,this.trickCount=0n,this.cardCountClaimMine=P(),this.cardCountClaimOthers=P(),this.cardCountClaimRemain=j(this.mode.optDecks),this.cardCountTotal=j(this.mode.optDecks),this.moveHistory=[],this.turnIndex=t.getInt(),this.passIndex=-1,this.resetMove()}processRoundInfo(t){if(this.moveHistory=[],this.cardCountHandMine=P(),this.cardCountClaimMine=P(),this.cardCountTotal=j(this.mode.optDecks),this.roundState!==N.mk.ACTIVE){this.canChallenge=!1,this.trickNum=this.trickTurn=0,this.trickCount=0n,this.cardCountClaimOthers=P(),this.cardCountClaimRemain=j(this.mode.optDecks);return}let e=t.getInt();this.trickNum=e>>1,this.canChallenge=!!(1&e),(this.trickTurn=t.getInt())&&(this.trickRank=t.getInt(),this.trickCount=t.getUint64());let n=G(t);this.cardCountClaimOthers=n,this.cardCountClaimRemain=this.cardCountTotal.map((t,e)=>t-n[e]),this.setCallTimer(this.canChallenge?t.getInt():0),this.passIndex=this.mode.optTricks!==d.FORCED?t.getInt():-1}processMoveConfirm(t){this.pendingMoveClaimAck=t.getInt(),this.pendingMoveAck=G(t)}processEndTurn(t){let e=this.playerInfo[this.turnIndex],n=this.clients[e.owner],s=(0,M.M0)(n,e.owner),a=n===this.localClient,i=t.getInt();if(i<0)this.moveHistory.push({type:"pass",playerName:s,playerIsMe:a}),this.mode.optTricks!==d.FORCED&&this.nextTurnAfterPass(e)&&this.nextTrick(),this.canChallenge=!1;else{let n=t.getUint64(),r=!this.nextRankPossible(i)||this.nextCountImpossible(n),o=r;if(this.mode.optTricks!==d.FORCED){this.passIndex=-1;let t=this.nextUnpassed(this.turnIndex);t===this.turnIndex&&(o=!0),o?e.handSize||this.nextTurn():this.mode.optTricks===d.SINGLE_TURN&&this.trickTurn?o=this.nextTurnAfterPass(e):(this.mode.optTricks===d.PASS_TURN&&this.unsetPassed(),this.turnIndex=t)}if(o?this.nextTrick(r):(this.trickCount=n,this.trickRank=i,this.trickTurn++),n){e.discardClaim[i]+=n,e.discardClaim[u.NUM]+=n,e.handSize-=n;let t=a?this.cardCountClaimMine:this.cardCountClaimOthers;t[i]+=n,t[u.NUM]+=n,this.cardCountClaimRemain[i]-=n,this.cardCountClaimRemain[u.NUM]-=n,this.shouldChallenge=(this.canChallenge=!a)&&n>this.cardCountAllOthers[i]+this.cardCountAllOthers[u.Joker],this.setCallTimer(this.mode.optCallTime)}else this.canChallenge=!1;this.moveHistory.push({type:"move",playerName:s,playerIsMe:a,rank:i,count:n})}this.mode.optTricks===d.FORCED&&this.nextTurn(),this.setTimer(this.mode.optTurnTime),this.resetMove()}nextTrick(t=!1){this.moveHistory.push({type:"tEnd",trick:this.trickNum,turn:this.trickTurn,move:t}),this.unsetPassed(),this.trickNum++,this.trickTurn=0}nextTurnAfterPass(t){let e=this.nextUnpassed(this.turnIndex);return e===this.turnIndex||this.passIndex<0&&this.nextUnpassed(e)===this.turnIndex?(this.turnIndex=this.passIndex<0?e:this.passIndex,this.passIndex=-1,!0):(this.turnIndex=e,t.passed=!0,!1)}nextUnpassed(t){let e=t;do++e===this.playerInfo.length&&(e=0);while(e!==t&&this.playerInfo[e].passed);return e}unsetPassed(){this.playerInfo.forEach(t=>t.passed=!1)}resetMove(){this.pendingMoveNum=S(),this.pendingMoveAck=P(),this.pendingMoveClaim=this.pendingMoveClaimAck=-1}processCall(t,e){let n=t.getCN(),s=this.playerInfo[n],a=this.clients[s.owner],i=e?s:this.playerInfo[(this.turnIndex||this.playerInfo.length)-1],r=e?a:this.clients[i.owner];for(let t of(this.moveHistory.push({type:e?"callFail":"callSuccess",playerName:(0,M.M0)(a,s.owner),playerIsMe:a===this.localClient,victimName:(0,M.M0)(r,i.owner),victimIsMe:r===this.localClient}),i.handSize+=this.cardCountClaimMine[u.NUM]+this.cardCountClaimOthers[u.NUM],this.playerInfo))t.discardClaim=P();this.cardCountAllMine=this.cardCountHandMine.slice(),this.cardCountClaimMine=P(),this.cardCountClaimOthers=P(),this.cardCountClaimRemain=j(this.mode.optDecks),this.canChallenge=!1,this.setTimer(this.mode.optTurnTime),this.setCallTimer(0)}processCallWin(t){this.processCall(t,!1)}processCallFail(t){this.processCall(t,!0)}processEndRound(t){let e=t.getUint64(),n={duration:e,trickNum:this.trickNum,players:this.playerDiscInfo.map(t=>({...t,name:t.ownerName}))},[s]=this.playerInfo,a=this.clients[s.owner],i=this.discIndex+1,r=1+this.playerDiscInfo.length;a.updateScore(i,r),n.players.splice(this.discIndex,0,{name:a.formatName(),isMe:a===this.localClient,trickNum:this.trickNum,duration:e}),this.addHistory(n)}eliminatePlayer(t,e,n,s,a,i){e.duration=t.getUint64(),e.trickNum=this.trickNum,i&&(this.cardCountClaimOthers[u.Joker]+=e.handSize=s.handSize,this.cardCountClaimOthers[u.NUM]+=e.handSize,this.cardCountClaimRemain[u.Joker]-=e.handSize,this.cardCountClaimRemain[u.NUM]-=e.handSize,n+1===(this.turnIndex||this.playerInfo.length)?this.canChallenge=!1:this.mode.optTricks!==d.FORCED&&n===this.turnIndex&&this.nextTurnAfterPass(s)&&this.nextTrick(),this.moveHistory.push({type:"leave",playerName:a.formatName(),playerIsMe:a===this.localClient,handSize:e.handSize}),this.setTimer(this.mode.optTurnTime));let r=this.playerInfo.length+this.playerDiscInfo.length,o=this.discIndex+(i?this.playerInfo.length:1);a.updateScore(o,r);let l=this.playerInfo.length-1;return this.turnIndex>n?this.turnIndex--:this.turnIndex===l&&(this.turnIndex=0),this.mode.optTricks!==d.FORCED&&(i?this.passIndex>n?this.passIndex--:this.passIndex===l&&(this.passIndex=0):this.passIndex=this.turnIndex),!i}processPrivateInfoHand(t){let e=G(t);this.cardCountHandMine=e,this.cardCountAllMine=e.slice()}processPrivateInfoMove(t){let e=G(t);for(let t=0;t<=u.NUM;t++)t<u.NUM&&(this.pendingMoveNum[t]=Number(e[t])),this.cardCountHandMine[t]-=e[t];this.moveHistory.push({type:"play",cards:e})}processPrivateInfoPenalty(t){let e=G(t);this.moveHistory.push({type:"penalty",cards:e});for(let t=0;t<=u.NUM;t++)this.cardCountHandMine[t]+=e[t]}processPrivateInfoResult(t){let e=G(t);if(this.moveHistory.push({type:"reveal",cards:e}),this.mode.optCheck===h.PUBLIC_ALL){let e=G(t);if(!e[u.NUM])return;this.moveHistory.push({type:"reveal2",cards:e})}}setCallTimer(t){let e=Date.now()+t;this.callTimerStart=e-Math.max(this.mode.optCallTime,t),this.callTimerEnd=e}allowRank(t){return this.trickTurn?this.checkRank(t,this.trickRank):this.checkRankStart(t)}allowCount(t){return this.trickTurn?t?t===this.trickCount?this.mode.optCountSame:t<this.trickCount?this.mode.optCountLess:this.mode.optCountMore&&t<=6n*this.mode.optDecks:this.mode.optCountZero:!!t}checkRankStart(t){return t===u.Ace?this.mode.optRankStartA:t===u.FKing?this.mode.optRankStartK:this.mode.optRankStartO}checkRank(t,e){if(t===e)return this.mode.optRank0;if(t===e+1)return this.mode.optRank1u;if(t===e+2)return this.mode.optRank2u;if(t===e-1)return this.mode.optRank1d;if(t===e-2)return this.mode.optRank2d;else if(t===u.Joker-1&&0===e)return this.mode.optRank1uw;else if(0===t&&e===u.Joker-1)return this.mode.optRank1dw;else if(t===u.Joker-1&&1===e||t===u.Joker-2&&0===e)return this.mode.optRank2uw;else if(0===t&&e===u.Joker-2||1===t&&e===u.Joker-1)return this.mode.optRank2dw;else return this.mode.optRankother}nextRankPossible(t){return this.mode.optRank0||this.mode.optRankother||(t===u.Joker-1?this.mode.optRank1uw:this.mode.optRank1u)||(0===t?this.mode.optRank1dw:this.mode.optRank1d)||(t===u.Joker-2?this.mode.optRank2uw:this.mode.optRank2u)||(1===t?this.mode.optRank2dw:this.mode.optRank2d)}nextCountImpossible(t){return!this.mode.optCountSame&&(t<=1n&&!this.mode.optCountMore||t===6n*this.mode.optDecks&&!this.mode.optCountLess)}playersSortProps=[t=>t.score,t=>t.wins,t=>t.streak]}function P(){return[0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n]}function S(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function j(t){let e=t+t,n=e+e;return[n,n,n,n,n,n,n,n,n,n,n,n,n,e,54n*t]}function G(t){let e=Array.from({length:u.NUM},()=>t.getUint64());return e.push(R(e)),e}(o=u||(u={}))[o.Ace=0]="Ace",o[o.N2=1]="N2",o[o.N3=2]="N3",o[o.N4=3]="N4",o[o.N5=4]="N5",o[o.N6=5]="N6",o[o.N7=6]="N7",o[o.N8=7]="N8",o[o.N9=8]="N9",o[o.N10=9]="N10",o[o.FJack=10]="FJack",o[o.FQueen=11]="FQueen",o[o.FKing=12]="FKing",o[o.Joker=13]="Joker",o[o.NUM=14]="NUM";var D=p.vUu(' <div class="d-inline-block"> <span> </span> </div>',1),$=p.vUu('<li class="list-group-item"><div> <!></div></li>'),V=p.vUu('<li class="list-group-item">No past games!</li>'),H=p.vUu('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),Z=p.vUu('<span class="badge text-bg-light"> </span><!>,',1),F=p.vUu('<div class="progress"><div class="progress-bar"></div></div>'),z=p.vUu('<div class="progress-stacked my-1"><div class="progress" style="width: 3.125%"><div class="progress-bar bg-info"></div></div> <!></div>'),W=p.vUu('<div class="progress bg-primary"></div>'),K=p.vUu('<tr><td> </td><td class="w-100"><!></td><td> </td></tr>'),q=p.vUu('<!> <table class="table table-sm"><tbody></tbody></table>',1);function Q(t,e){p.VCO(e,!0);let n=p.unG(()=>e.cards.at(-1));var s=p.Imx(),a=p.esp(s),i=t=>{let s=p.unG(()=>e.cards.length-2),a=p.unG(()=>e.cards[p.JtY(s)]),i=p.unG(()=>e.cards.slice(0,-2)),r=p.unG(()=>BigInt(p.JtY(i).filter(t=>t).reduce((t,e)=>t<e?t:e))),o=p.unG(()=>BigInt(p.JtY(i).reduce((t,e)=>t>e?t:e))),l=p.unG(()=>p.JtY(o)-p.JtY(r));var c=q(),h=p.esp(c),d=t=>{var n=Z(),i=p.esp(n),r=p.jfp(i,!0);p.cLc(i);var o=p.hg4(i),l=t=>{var e=p.Qq7();p.vNg(()=>p.jax(e,` \xd7${p.JtY(a)??""}`)),p.BCw(t,e)};p.if(o,t=>{p.JtY(a)>1&&t(l)}),p.K2T(),p.vNg(()=>p.jax(r,e.ranks[p.JtY(s)])),p.BCw(t,n)};p.if(h,t=>{p.JtY(a)&&t(d)});var u=p.hg4(h),m=p.hg4(u),v=p.jfp(m);p.__1(v,21,()=>p.JtY(i),p.Pe0,(t,n,s)=>{var a=p.Imx(),i=p.esp(a),o=t=>{var a=K(),i=p.jfp(a),o=p.jfp(i,!0);p.cLc(i);var c=p.hg4(i),h=p.jfp(c),d=t=>{var e=z(),s=p.hg4(p.jfp(e),2),a=t=>{var e=F();p.vNg(t=>p.hgi(e,`width:${t??""}%`),[()=>Number((BigInt(p.JtY(n))-p.JtY(r))*96875n/p.JtY(l))/1e3]),p.BCw(t,e)};p.if(s,t=>{p.JtY(n)>p.JtY(r)&&t(a)}),p.cLc(e),p.BCw(t,e)},u=t=>{var e=W();p.BCw(t,e)};p.if(h,t=>{p.JtY(l)?t(d):t(u,!1)}),p.cLc(c);var m=p.hg4(c),v=p.jfp(m,!0);p.cLc(m),p.cLc(a),p.vNg(()=>{p.jax(o,e.ranks[s]),p.jax(v,p.JtY(n))}),p.BCw(t,a)};p.if(i,t=>{p.JtY(n)&&t(o)}),p.BCw(t,a)}),p.cLc(v),p.cLc(m),p.vNg(()=>p.jax(u,` ${p.JtY(n)??""} total.   `)),p.BCw(t,c)};p.if(a,t=>{p.JtY(n)&&t(i)}),p.BCw(t,s),p.uYY()}var X=p.vUu('<span class="badge text-bg-light"> </span><!> ',1);function tt(t,e){p.VCO(e,!0);var n=p.Imx(),s=p.esp(n);p.__1(s,17,()=>e.cards,p.Pe0,(t,n,s)=>{var a=p.Imx(),i=p.esp(a),r=t=>{var a=p.Imx(),i=p.esp(a),r=t=>{var e=p.Qq7();p.vNg(()=>p.jax(e,` ${p.JtY(n)??""} total.`)),p.BCw(t,e)},o=t=>{var a=X(),i=p.esp(a),r=p.jfp(i,!0);p.cLc(i);var o=p.hg4(i),l=t=>{var e=p.Qq7();p.vNg(()=>p.jax(e,` \xd7${p.JtY(n)??""}`)),p.BCw(t,e)};p.if(o,t=>{p.JtY(n)>1&&t(l)}),p.hg4(o).nodeValue=", ",p.vNg(()=>p.jax(r,e.ranks[s])),p.BCw(t,a)};p.if(i,t=>{s+1==e.cards.length?t(r):t(o,!1)}),p.BCw(t,a)};p.if(i,t=>{p.JtY(n)&&t(r)}),p.BCw(t,a)}),p.BCw(t,n),p.uYY()}var te=p.vUu('<th scope="col"> </th>'),tn=p.vUu("<td> </td>"),ts=p.vUu('<tr><th scope="row"> </th><!></tr>'),ta=p.vUu('<div class="table-responsive"><table class="table table-sm"><thead><tr><th></th><!></tr></thead><tbody></tbody></table></div>');function ti(t,e){var n=ta(),s=p.jfp(n),a=p.jfp(s),i=p.jfp(a),r=p.hg4(p.jfp(i));p.__1(r,17,()=>e.ranks,p.Pe0,(t,e)=>{var n=te(),s=p.jfp(n,!0);p.cLc(n),p.vNg(()=>p.jax(s,p.JtY(e))),p.BCw(t,n)}),p.cLc(i),p.cLc(a);var o=p.hg4(a);p.__1(o,21,()=>e.counts,p.Pe0,(t,e)=>{var n=ts(),s=p.jfp(n),a=p.jfp(s,!0);p.cLc(s);var i=p.hg4(s);p.__1(i,17,()=>p.JtY(e)[1],p.Pe0,(t,e)=>{var n=tn(),s=p.jfp(n,!0);p.cLc(n),p.vNg(()=>p.jax(s,p.JtY(e))),p.BCw(t,n)}),p.cLc(n),p.vNg(()=>p.jax(a,p.JtY(e)[0])),p.BCw(t,n)}),p.cLc(o),p.cLc(s),p.cLc(n),p.BCw(t,n)}var tr=n(124),to=n(131),tl=p.vUu('<span> </span> played <span class="badge text-bg-light"> </span><!>.',1),tc=p.vUu("<span> </span> passed.",1),th=p.vUu("<span> </span> called cheat successfully on <span> </span>.",1),td=p.vUu("<span> </span> called cheat wrongfully.",1),tu=p.vUu(" <!>",1),tp=p.vUu("<span> </span> ",1),tm=p.vUu("<div><!></div> ",1),tv=p.vUu('<b>Move History</b> <label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">compact</span></label> <div class="overflow-auto" style="max-height: 20rem"></div>',1);let tg=["A","2","3","4","5","6","7","8","9","10","J","Q","K","*","Total"];var tC=p.vUu("<!> <!>",1),tk=p.vUu(' <span class="badge text-bg-light"> </span> ',1),tf=(t,e)=>e().sendMoveCallCheat(),tI=p.vUu("<span>PASS</span>"),tw=p.vUu('<span class="badge text-bg-outline-danger">IMPOSSIBLE</span>'),tN=p.vUu("<span>HONEST</span>"),tR=p.vUu("<span>BLUFF</span>"),tM=p.vUu("<span> </span> <!>",1),tY=(t,e)=>(e().pendingMoveClaim=-1,e().sendMove()),ty=p.vUu("<button> </button>"),tT=(t,e)=>e().sendMove(),tJ=(t,e)=>e().sendMove(),tE=p.vUu('<div class="col-4 col-md-3 col-lg-2"> <input type="number" min="0"/> <input type="range" class="form-range" min="0"/></div>'),tx=p.vUu("Passing is not allowed<!>.",1),tA=p.vUu(" <!>.",1),tb=p.vUu("<!> <!>",1),tL=p.vUu('<div class="alert alert-danger"><!></div>'),tU=(t,e)=>e().sendMoveEnd(),tB=p.vUu('<div class="mb-2 text-center">Your move: <!></div> <div class="btn-group d-flex mb-3" role="group"><button>Pass</button> <!></div> <div class="row"></div> <!> <div class="col-12 mb-2"><button class="btn btn-primary d-block w-100 mb-2">End Move</button></div>',1),t_=p.vUu('<button>Call Cheat</button> <div class="my-2"><label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">Your hand:</span></label> <!></div> <!>',1),tO=p.vUu("<!> <!>",1),tP=p.vUu('<li><span class="badge text-bg-outline-success">IN</span></li>'),tS=p.vUu("<span>MOVE</span>"),tj=p.vUu("<span>OUT</span>"),tG=p.vUu("<!> <li><span> </span> <!> <!> </li>",1),tD=p.vUu("<li>No players!</li>"),t$=p.vUu("<li> <span> </span> </li>"),tV=p.vUu("<li>No leavers yet!</li>"),tH=p.vUu("<div>Your cards <!></div> <div>Actual cards <!></div> <div>Claimed cards <!></div>",1),tZ=p.vUu('<!> <div class="row"><div class="col-12"><div class="mb-2 text-center"> <!></div> <!></div> <div class="col-12 col-sm-4"><b>Active Players</b> <ol class="list-unstyled"></ol> <b>Done Players</b> <ol class="list-unstyled"></ol></div> <div class="col-12 col-sm-8"><!></div> <div class="col mt-2"><!> <!></div></div> <div> </div> <b>Lobby</b> <!>',1);p.MmH(["click","change"]);var tF=n(101),tz=p.vUu('<!> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,n(95).A)(function(t,e){let n;p.VCO(e,!0);let s=new v.Ay,a=new O(s),i=p.unG(()=>a.pastGames),r=p.unG(()=>a.leaderboard),o=p.unG(()=>a.localClient),l=p.unG(()=>a.roundState),c=(0,tF.C)("game/mp/_shared/name","");var h=tz(),R=p.esp(h);(0,k.A)(R,{get value(){return c.value},set value($$value){c.value=$$value}});var Y=p.hg4(R,2);p.Lcc((0,w.A)(Y,{gameId:"cheat-zoded3ozqeqvek0bpz3fow",roomType:"CheatRoom",get gameRoom(){return a.room},onJoinedRoom:t=>a.enterGame(t,c.value),formatGameMode:t=>b((0,I.e)(A,t)),get roomCreateOptions(){return A}}),t=>n=t,()=>n);var y=p.hg4(Y,2);{let t=p.unG(()=>p.JtY(l)===N.mk.INTERMISSION);(0,f.A)(y,{get inGame(){return a.room},get isActive(){return a.localClient.active},get canReady(){return p.JtY(t)},get isReady(){return a.localClient.ready},onActive:()=>a.sendActive(),onReady:()=>a.sendReady(),onReset:()=>a.sendReset(),onDisconnect:()=>(a.leaveGame(),n.refreshRooms()),children:(t,e)=>{!function(t,e){let n;p.VCO(e,!0);let s=p._w2(e,"gameState",7),a=p.unG(()=>s().localClient),i=p.unG(()=>s().roundState),r=p.unG(()=>s().playerInfo),o=p.unG(()=>s().turnIndex),l=p.unG(()=>s().playing),c=p.unG(()=>s().canMove),h=p.unG(()=>s().playerDiscInfo),m=p.unG(()=>s().moveHistory),v=p.wk1(!1);var g,C,k,f,I,w,R=tZ(),Y=p.esp(R),y=t=>{var e=p.Qq7("Waiting for players…");p.BCw(t,e)},T=t=>{var e=tC(),n=p.esp(e),r=t=>{var e=p.Qq7("Intermission:");p.BCw(t,e)},o=t=>{var e=p.Imx(),n=p.esp(e),s=t=>{var e=p.Qq7("Make a move:");p.BCw(t,e)},i=t=>{var e=p.Imx(),n=p.esp(e),s=t=>{var e=p.Qq7("Waiting for opponent to move…");p.BCw(t,e)},i=t=>{var e=p.Qq7("Spectating:");p.BCw(t,e)};p.if(n,t=>{p.JtY(a).inRound?t(s):t(i,!1)},!0),p.BCw(t,e)};p.if(n,t=>{p.JtY(c)?t(s):t(i,!1)},!0),p.BCw(t,e)};p.if(n,t=>{p.JtY(i)===N.mk.INTERMISSION?t(r):t(o,!1)});var l=p.hg4(n,2);(0,tr.A)(l,{get startTime(){return s().roundTimerStart},get endTime(){return s().roundTimerEnd},get active(){return s().room}}),p.BCw(t,e)};p.if(Y,t=>{p.JtY(i)==N.mk.WAITING?t(y):t(T,!1)});var J=p.hg4(Y,2),E=p.jfp(J),x=p.jfp(E),A=p.jfp(x),L=p.hg4(A),U=t=>{var e=tk(),n=p.esp(e),a=p.hg4(n),i=p.jfp(a,!0);p.cLc(a);var r=p.hg4(a);p.vNg(()=>{p.jax(n,`Move ${s().trickTurn??""}: `),p.jax(i,tg[s().trickRank]),p.jax(r,` \xd7${s().trickCount??""}`)}),p.BCw(t,e)},B=t=>{var e=p.Qq7("Move 0");p.BCw(t,e)};p.if(L,t=>{s().trickTurn?t(U):t(B,!1)}),p.cLc(x);var _=p.hg4(x,2),O=t=>{var e=tO(),n=p.esp(e),a=t=>{let e,n=p.unG(()=>p.JtY(v)?Q:tt);var a=t_(),i=p.esp(a);i.__click=[tf,s];var r=p.hg4(i,2),o=p.jfp(r),l=p.jfp(o);p.R0j(l),p.K2T(2),p.cLc(o);var h=p.hg4(o,2);p.s9R(h,()=>p.JtY(n),(t,e)=>{e(t,{get ranks(){return tg},get cards(){return s().cardCountHandMine}})}),p.cLc(r);var m=p.hg4(r,2),g=t=>{let e,n=p.unG(()=>s().mode.optTricks!==d.FORCED&&s().trickTurn),a=p.unG(()=>s().pendingMoveClaim<0),i=p.unG(()=>p.JtY(a)?p.JtY(n):s().allowRank(s().pendingMoveClaim)),r=p.unG(()=>p.JtY(a)||s().allowCount(s().pendingMoveTotal)),o=p.unG(()=>p.JtY(i)?"":"outline-"),l=p.unG(()=>p.JtY(r)?"":"outline-");var c=tB(),h=p.esp(c),m=p.hg4(p.jfp(h)),v=t=>{var e=tI();p.vNg(()=>p.ysU(e,1,`badge text-bg-${p.JtY(n)?"":"outline-"}danger`)),p.BCw(t,e)},g=t=>{var e=tM(),n=p.esp(e),a=p.jfp(n,!0);p.cLc(n);var i=p.hg4(n),r=p.hg4(i),c=t=>{var e=tw();p.BCw(t,e)},h=t=>{var e=p.Imx(),n=p.esp(e),a=t=>{var e=tN();p.vNg(()=>p.ysU(e,1,`badge text-bg-${p.JtY(l)??""}success`)),p.BCw(t,e)},i=t=>{var e=tR();p.vNg(()=>p.ysU(e,1,`badge text-bg-${p.JtY(l)??""}warning`)),p.BCw(t,e)};p.if(n,t=>{s().pendingMoveTotal==BigInt(s().pendingMoveNum[s().pendingMoveClaim])+BigInt(s().pendingMoveNum[u.Joker])?t(a):t(i,!1)},!0),p.BCw(t,e)};p.if(r,t=>{s().pendingMoveTotal>6n*s().mode.optDecks?t(c):t(h,!1)}),p.vNg(()=>{p.ysU(n,1,`badge text-bg-${p.JtY(o)??""}light`),p.jax(a,tg[s().pendingMoveClaim]),p.jax(i,` \xd7${s().pendingMoveTotal??""} `)}),p.BCw(t,e)};p.if(m,t=>{p.JtY(a)?t(v):t(g,!1)}),p.cLc(h);var C=p.hg4(h,2),k=p.jfp(C);k.__click=[tY,s];var f=p.hg4(k,2);p.__1(f,17,()=>({length:u.NUM-1}),p.Pe0,(t,e,n)=>{let a;var i=ty();i.__click=()=>(s().pendingMoveClaim=n,s().sendMove());var r=p.jfp(i,!0);p.cLc(i),p.vNg((t,e)=>{a=p.ysU(i,1,`fw-bold w-100 btn btn-${s().pendingMoveClaimAck==n?"":"outline-"}${t??""}`,null,a,e),p.jax(r,tg[n])},[()=>s().allowRank(n)?"primary":"secondary",()=>({active:s().pendingMoveClaim==n})]),p.BCw(t,i)}),p.cLc(C);var I=p.hg4(C,2);p.__1(I,21,()=>({length:u.NUM}),p.Pe0,(t,e,n)=>{var a=p.Imx(),i=p.esp(a),r=t=>{let e=p.unG(()=>s().cardCountHandMine[n].toString());var a=tE(),i=p.jfp(a),r=p.hg4(i);p.R0j(r),r.__change=[tT,s];var o=p.hg4(r,2);p.R0j(o),o.__change=[tJ,s],p.cLc(a),p.vNg(t=>{p.jax(i,`${tg[n]??""} `),p.ysU(r,1,`form-control is-${t??""}valid`),p.aIK(r,"max",p.JtY(e)),p.aIK(o,"max",p.JtY(e))},[()=>s().pendingMoveNum[n]===Number(s().pendingMoveAck[n])?"":"in"]),p.oJB(r,()=>s().pendingMoveNum[n],t=>s().pendingMoveNum[n]=t),p.oJB(o,()=>s().pendingMoveNum[n],t=>s().pendingMoveNum[n]=t),p.BCw(t,a)};p.if(i,t=>{s().cardCountHandMine[n]&&t(r)}),p.BCw(t,a)}),p.cLc(I);var w=p.hg4(I,2),N=t=>{var e=tL(),n=p.jfp(e),o=t=>{var e=tx(),n=p.hg4(p.esp(e)),a=t=>{var e=p.Qq7();e.nodeValue=" on a new trick",p.BCw(t,e)};p.if(n,t=>{s().mode.optTricks!==d.FORCED&&t(a)}),p.K2T(),p.BCw(t,e)},l=t=>{var e=tb(),n=p.esp(e),a=t=>{var e=p.Qq7();p.vNg(()=>p.jax(e,`Rank ${tg[s().pendingMoveClaim]??""} is not allowed.`)),p.BCw(t,e)};p.if(n,t=>{p.JtY(i)||t(a)});var o=p.hg4(n,2),l=t=>{var e=tA(),n=p.esp(e),a=p.hg4(n),i=t=>{var e=p.Qq7();e.nodeValue=" on a new trick",p.BCw(t,e)};p.if(a,t=>{!s().pendingMoveTotal&&s().mode.optCountZero&&t(i)}),p.K2T(),p.vNg(()=>p.jax(n,`Count ${s().pendingMoveTotal??""} is not allowed`)),p.BCw(t,e)};p.if(o,t=>{p.JtY(r)||t(l)}),p.BCw(t,e)};p.if(n,t=>{p.JtY(a)?t(o):t(l,!1)}),p.cLc(e),p.BCw(t,e)};p.if(w,t=>{p.JtY(i)&&p.JtY(r)||t(N)});var R=p.hg4(w,2);p.jfp(R).__click=[tU,s],p.cLc(R),p.vNg(t=>e=p.ysU(k,1,`fw-bold w-100 btn btn-${s().pendingMoveClaimAck<0?"":"outline-"}${p.JtY(n)?"danger":"secondary"}`,null,e,t),[()=>({active:p.JtY(a)})]),p.BCw(t,c)};p.if(m,t=>{p.JtY(c)&&t(g)}),p.vNg(t=>e=p.ysU(i,1,`btn btn-${s().canChallenge&&s().shouldChallenge?"":"outline-"}danger d-block w-100 mb-2`,null,e,t),[()=>({disabled:!s().canChallenge})]),p.mST(l,()=>p.JtY(v),t=>p.hZp(v,t)),p.BCw(t,a)};p.if(n,t=>{p.JtY(l)&&t(a)});var i=p.hg4(n,2);(0,tr.A)(i,{get startTime(){return s().callTimerStart},get endTime(){return s().callTimerEnd},get active(){return s().room}}),p.BCw(t,e)};p.if(_,t=>{p.JtY(i)===N.mk.ACTIVE&&t(O)}),p.cLc(E);var P=p.hg4(E,2),S=p.hg4(p.jfp(P),2);p.__1(S,21,()=>p.JtY(r),p.Pe0,(t,e,n)=>{let a=p.unG(()=>s().playerIsMe(p.JtY(e))),i=p.unG(()=>p.JtY(a)?"":"-outline");var l=tG(),c=p.esp(l),h=t=>{var e=tP();p.BCw(t,e)};p.if(c,t=>{n===s().passIndex&&p.JtY(r).length>1&&t(h)});var d=p.hg4(c,2),u=p.jfp(d),m=p.jfp(u,!0);p.cLc(u);var v=p.hg4(u,2),g=t=>{var e=tS();p.vNg(()=>p.ysU(e,1,`badge text-bg${p.JtY(i)??""}-primary`)),p.BCw(t,e)};p.if(v,t=>{n===p.JtY(o)&&t(g)});var C=p.hg4(v,2),k=t=>{var e=tj();p.vNg(()=>p.ysU(e,1,`badge text-bg${p.JtY(i)??""}-danger`)),p.BCw(t,e)};p.if(C,t=>{p.JtY(e).passed&&t(k)});var f=p.hg4(C);p.cLc(d),p.vNg(t=>{p.ysU(u,1,`badge text-bg${p.JtY(i)??""}-${N.mk.ACTIVE&&n===p.JtY(o)?"primary":"secondary"}`),p.jax(m,t),p.jax(f,` ${p.JtY(e).handSize??""}`)},[()=>s().formatPlayerName(p.JtY(e))]),p.BCw(t,l)},t=>{var e=tD();p.BCw(t,e)}),p.cLc(S);var j=p.hg4(S,4);p.__1(j,21,()=>p.JtY(h),p.Pe0,(t,e,n)=>{let a=p.unG(()=>p.JtY(e).isMe?"":"-outline");var i=t$(),o=p.jfp(i),l=p.hg4(o),c=p.jfp(l,!0);p.cLc(l);var h=p.hg4(l);p.cLc(i),p.vNg(t=>{p.jax(o,`#${n+(n>=s().discIndex?1+p.JtY(r).length:1)}: `),p.ysU(l,1,`badge text-bg${p.JtY(a)??""}-${p.JtY(e).handSize?"danger":"success"}`),p.jax(c,p.JtY(e).ownerName),p.jax(h,` (${p.JtY(e).handSize?"left "+p.JtY(e).handSize:"won"}) on trick ${p.JtY(e).trickNum??""} in ${t??""}`)},[()=>(0,M.a3)(p.JtY(e).duration)]),p.BCw(t,i)},t=>{var e=tV();p.BCw(t,e)}),p.cLc(j),p.cLc(P);var G=p.hg4(P,2);g=p.jfp(G),C={get moves(){return p.JtY(m)}},p.VCO(C,!0),n=p.wk1(!0),k=tv(),f=p.hg4(p.esp(k),2),I=p.jfp(f),p.R0j(I),p.K2T(2),p.cLc(f),w=p.hg4(f,2),p.__1(w,21,()=>C.moves,p.Pe0,(t,e)=>{let s;var a=tm(),i=p.esp(a),r=p.jfp(i),o=t=>{var n=p.Qq7();p.vNg(()=>p.jax(n,`[${p.JtY(e).trick??""}:${p.JtY(e).turn??""} end${p.JtY(e).move?" by pass":""}]`)),p.BCw(t,n)},l=t=>{var n=p.Imx(),s=p.esp(n),a=t=>{let n=p.unG(()=>p.JtY(e).playerIsMe?"":"-outline");var s=tl(),a=p.esp(s),i=p.jfp(a,!0);p.cLc(a);var r=p.hg4(a,2),o=p.jfp(r,!0);p.cLc(r);var l=p.hg4(r),c=t=>{var n=p.Qq7();p.vNg(()=>p.jax(n,` \xd7${p.JtY(e).count??""}`)),p.BCw(t,n)};p.if(l,t=>{1n!=p.JtY(e).count&&t(c)}),p.K2T(),p.vNg(()=>{p.ysU(a,1,`badge text-bg${p.JtY(n)??""}-primary`),p.jax(i,p.JtY(e).playerName),p.jax(o,tg[p.JtY(e).rank])}),p.BCw(t,s)},i=t=>{var n=p.Imx(),s=p.esp(n),a=t=>{let n=p.unG(()=>p.JtY(e).playerIsMe?"":"-outline");var s=tc(),a=p.esp(s),i=p.jfp(a,!0);p.cLc(a),p.K2T(),p.vNg(()=>{p.ysU(a,1,`badge text-bg${p.JtY(n)??""}-primary`),p.jax(i,p.JtY(e).playerName)}),p.BCw(t,s)},i=t=>{var n=p.Imx(),s=p.esp(n),a=t=>{let n=p.unG(()=>p.JtY(e).playerIsMe?"":"-outline"),s=p.unG(()=>p.JtY(e).victimIsMe?"":"-outline");var a=th(),i=p.esp(a),r=p.jfp(i,!0);p.cLc(i);var o=p.hg4(i,2),l=p.jfp(o,!0);p.cLc(o),p.K2T(),p.vNg(()=>{p.ysU(i,1,`badge text-bg${p.JtY(n)??""}-success`),p.jax(r,p.JtY(e).playerName),p.ysU(o,1,`badge text-bg${p.JtY(s)??""}-danger`),p.jax(l,p.JtY(e).victimName)}),p.BCw(t,a)},i=t=>{var n=p.Imx(),s=p.esp(n),a=t=>{let n=p.unG(()=>p.JtY(e).playerIsMe?"":"-outline");var s=td(),a=p.esp(s),i=p.jfp(a,!0);p.cLc(a),p.K2T(),p.vNg(()=>{p.ysU(a,1,`badge text-bg${p.JtY(n)??""}-danger`),p.jax(i,p.JtY(e).playerName)}),p.BCw(t,s)},i=t=>{var n=p.Imx(),s=p.esp(n),a=t=>{var n=tu(),s=p.esp(n);tt(p.hg4(s),{get ranks(){return tg},get cards(){return p.JtY(e).cards}}),p.vNg(()=>p.jax(s,`${{play:"You played",penalty:"You took",reveal:"Previous move",reveal2:"Cards under previous move"}[p.JtY(e).type]??""}: `)),p.BCw(t,n)},i=t=>{var n=p.Imx(),s=p.esp(n),a=t=>{let n=p.unG(()=>p.JtY(e).playerIsMe?"":"-outline");var s=tp(),a=p.esp(s),i=p.jfp(a,!0);p.cLc(a);var r=p.hg4(a);p.vNg(()=>{p.ysU(a,1,`badge text-bg${p.JtY(n)??""}-secondary`),p.jax(i,p.JtY(e).playerName),p.jax(r,` left, discarding \xd7${p.JtY(e).handSize??""}.`)}),p.BCw(t,s)},i=t=>{var n=p.Qq7();p.vNg(()=>p.jax(n,`[unknown move ${p.JtY(e)??""}]`)),p.BCw(t,n)};p.if(s,t=>{"leave"==p.JtY(e).type?t(a):t(i,!1)},!0),p.BCw(t,n)};p.if(s,t=>{"play"==p.JtY(e).type||"penalty"==p.JtY(e).type||"reveal"==p.JtY(e).type||"reveal2"==p.JtY(e).type?t(a):t(i,!1)},!0),p.BCw(t,n)};p.if(s,t=>{"callFail"==p.JtY(e).type?t(a):t(i,!1)},!0),p.BCw(t,n)};p.if(s,t=>{"callSuccess"==p.JtY(e).type?t(a):t(i,!1)},!0),p.BCw(t,n)};p.if(s,t=>{"pass"==p.JtY(e).type?t(a):t(i,!1)},!0),p.BCw(t,n)};p.if(s,t=>{"move"==p.JtY(e).type?t(a):t(i,!1)},!0),p.BCw(t,n)};p.if(r,t=>{"tEnd"==p.JtY(e).type?t(o):t(l,!1)}),p.cLc(i),p.hg4(i).nodeValue="  ",p.vNg(t=>s=p.ysU(i,1,"",null,s,t),[()=>({"d-inline-block":p.JtY(n)})]),p.BCw(t,a)},t=>{p.K2T();var e=p.Qq7("No moves yet!");p.BCw(t,e)}),p.cLc(w),p.mST(I,()=>p.JtY(n),t=>p.hZp(n,t)),p.BCw(g,k),p.uYY(),p.cLc(G);var D=p.hg4(G,2),$=p.jfp(D),V=t=>{var e=tH(),n=p.esp(e),a=p.hg4(p.jfp(n));{let t=p.unG(()=>[["Hand",s().cardCountHandMine],["Played",s().cardCountAllMine.map((t,e)=>t-s().cardCountHandMine[e])],["Yours",s().cardCountAllMine]]);ti(a,{get ranks(){return tg},get counts(){return p.JtY(t)}})}p.cLc(n);var i=p.hg4(n,2),r=p.hg4(p.jfp(i));{let t=p.unG(()=>[["Yours",s().cardCountAllMine],["Others",s().cardCountTotal.map((t,e)=>t-s().cardCountAllMine[e])],["Total",s().cardCountTotal]]);ti(r,{get ranks(){return tg},get counts(){return p.JtY(t)}})}p.cLc(i);var o=p.hg4(i,2),l=p.hg4(p.jfp(o));{let t=p.unG(()=>[["Your Claim",s().cardCountClaimMine],["Others Claim",s().cardCountClaimOthers],["Remaining Claim",s().cardCountClaimRemain],["Total",s().cardCountTotal]]);ti(l,{get ranks(){return tg},get counts(){return p.JtY(t)}})}p.cLc(o),p.BCw(t,e)},H=t=>{{let e=p.unG(()=>[["Others Claim",s().cardCountClaimOthers],["Remaining Claim",s().cardCountClaimRemain],["Total",s().cardCountTotal]]);ti(t,{get ranks(){return tg},get counts(){return p.JtY(e)}})}};p.if($,t=>{p.JtY(i)===N.mk.ACTIVE&&p.JtY(l)?t(V):t(H,!1)});var Z=p.hg4($,2),F=t=>{{let e=p.unG(()=>p.JtY(r).map(t=>[s().formatPlayerName(t),t.discardClaim]));ti(t,{get ranks(){return tg},get counts(){return p.JtY(e)}})}};p.if(Z,t=>{p.JtY(r).length&&t(F)}),p.cLc(D),p.cLc(J);var z=p.hg4(J,2),W=p.jfp(z);p.cLc(z);var K=p.hg4(z,4);(0,to.A)(K,{get localClient(){return s().localClient},get inGame(){return s().roundPlayers},get inQueue(){return s().roundPlayerQueue}}),p.vNg(t=>{p.jax(A,`Trick ${s().trickNum??""} `),p.jax(W,`Game Mode: ${t??""}`)},[()=>b(s().mode)]),p.BCw(t,R),p.uYY()}(t,{get gameState(){return a}})},$$slots:{default:!0}})}var T=p.hg4(y,2),J=p.jfp(T),E=p.jfp(J);(0,g.A)(E,{get canClear(){return p.JtY(i).length},onClear:()=>a.clearHistory(),children:(t,e)=>{var n,s;n={get results(){return p.JtY(i)}},p.VCO(n,!0),s=H(),p.__1(s,21,()=>n.results,p.Pe0,(t,e)=>{var n=$(),s=p.jfp(n),a=p.jfp(s),i=p.hg4(a);p.__1(i,17,()=>p.JtY(e).players,p.Pe0,(t,e,n)=>{p.K2T();var s=D(),a=p.esp(s);a.nodeValue="  ";var i=p.hg4(a),r=p.jfp(i);r.nodeValue=`#${n+1} `;var o=p.hg4(r);p.ysU(o,1,`badge text-bg-${n?"secondary":"primary"}`);var l=p.jfp(o,!0);p.cLc(o);var c=p.hg4(o);p.cLc(i),p.vNg(t=>{p.jax(l,p.JtY(e).name),p.jax(c,` (on ${p.JtY(e).trickNum??""} in ${t??""})`)},[()=>(0,M.a3)(p.JtY(e).duration)]),p.BCw(t,s)}),p.cLc(s),p.cLc(n),p.vNg(t=>p.jax(a,`Trick ${p.JtY(e).trickNum??""} in ${t??""}: `),[()=>(0,M.a3)(p.JtY(e).duration)]),p.BCw(t,n)},t=>{var e=V();p.BCw(t,e)}),p.cLc(s),p.BCw(t,s),p.uYY()},$$slots:{default:!0}});var x=p.hg4(E,2);(0,C.A)(x,{get leaderboard(){return p.JtY(r)},get localClient(){return p.JtY(o)},columns:[["Score",t=>t.score],["Wins",t=>t.wins],["Loss",t=>t.losses],["Streak",t=>t.streak],["Best Rank",t=>t.rankBest],["Worst Rank",t=>t.rankWorst],["Last Rank",t=>t.rankLast]]}),p.cLc(J);var L=p.hg4(J,2),U=p.jfp(L);(0,m.A)(U,{get chatState(){return s},onInput:t=>(0,v.Oo)(a,t)}),p.cLc(L),p.cLc(T),p.BCw(t,h),p.uYY()})},127:function(t,e,n){n.d(e,{M0:()=>l,a3:()=>c,iq:()=>a,iw:()=>i,yh:()=>o,yn:()=>r});var s=n(128);let a=64;function i(t){return(t=t.replace(/[^a-zA-Z_ ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function r(){let t=new s.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",t.debugBuf,t),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function o(t,e){let n=t.filter(t=>t).sort((t,n)=>{for(let s of e){let e=s(t),a=s(n);if(e<a)return 1;if(e>a)return -1}return t.cn-n.cn}),s=1;return n.forEach((t,a)=>{if(a){let i=n[a-1];e.some(e=>e(t)!==e(i))&&(s=a+1)}n[a].rank=s}),n.sort((t,e)=>e.active-t.active)}function l(t,e){return t?`${t.name} (${t.cn})`:`<unknown${void 0===e?"":` (${e})`}>`}function c(t){let e=Number(t%1000n);return`${t/1000n}${(e/1e3+"").slice(1)}s`}}},e={};function n(s){var a=e[s];if(void 0!==a)return a.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.m=t,n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=[];n.O=(e,s,a,i)=>{if(s){i=i||0;for(var r=t.length;r>0&&t[r-1][2]>i;r--)t[r]=t[r-1];t[r]=[s,a,i];return}for(var o=1/0,r=0;r<t.length;r++){for(var[s,a,i]=t[r],l=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every(t=>n.O[t](s[c]))?s.splice(c--,1):(l=!1,i<o&&(o=i));if(l){t.splice(r--,1);var h=a();void 0!==h&&(e=h)}}return e}})(),n.rv=()=>"1.5.1",(()=>{var t={89:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var a,i,[r,o,l]=s,c=0;if(r.some(e=>0!==t[e])){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)var h=l(n)}for(e&&e(s);c<r.length;c++)i=r[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(h)},s=self.webpackChunkvwww=self.webpackChunkvwww||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),n.ruid="bundler=rspack@1.5.1";var s=n.O(void 0,["1","2","5","13","28","17","29","35","37","39","36","34"],function(){return n(133)});s=n.O(s)})();