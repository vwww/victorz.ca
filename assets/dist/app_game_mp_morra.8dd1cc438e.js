(()=>{"use strict";var e={135:function(e,t,n){n(1);var s,r,a,o,i=n(2),l=n(116),u=n(117),d=n(118),c=n(119),v=n(120),g=n(121),p=n(122),m=n(123),h=n(126);let f=[["optInverted","b",!1,"Inverted","switch winning and losing"],["optAddRandom","b",!1,"Random","add a random number to the result"],["optTeams","i",0,"Teams","number of teams",0,45]];function R({optInverted:e,optAddRandom:t,optTeams:n}){return(e?"Inverted ":"")+(t?"Randomized ":"")+(n?n+"-team":"FFA")}var E=n(129);class M extends h.wG{}class w extends h.Nd{}(s=a||(a={}))[s.WELCOME=0]="WELCOME",s[s.JOIN=1]="JOIN",s[s.LEAVE=2]="LEAVE",s[s.RESET=3]="RESET",s[s.RENAME=4]="RENAME",s[s.PING=5]="PING",s[s.PING_TIME=6]="PING_TIME",s[s.CHAT=7]="CHAT",s[s.ACTIVE=8]="ACTIVE",s[s.ROUND_WAIT=9]="ROUND_WAIT",s[s.ROUND_INTERM=10]="ROUND_INTERM",s[s.ROUND_START=11]="ROUND_START",s[s.READY=12]="READY",s[s.END_ROUND=13]="END_ROUND",s[s.MOVE_CONFIRM=14]="MOVE_CONFIRM",(r=o||(o={}))[r.RESET=0]="RESET",r[r.RENAME=1]="RENAME",r[r.PONG=2]="PONG",r[r.CHAT=3]="CHAT",r[r.ACTIVE=4]="ACTIVE",r[r.READY=5]="READY",r[r.MOVE=6]="MOVE";class I extends M{#e=i.wk1(0);get wins(){return i.JtY(this.#e)}set wins(e){i.hZp(this.#e,e,!0)}#t=i.wk1(0);get losses(){return i.JtY(this.#t)}set losses(e){i.hZp(this.#t,e,!0)}#n=i.wk1(0);get total(){return i.JtY(this.#n)}set total(e){i.hZp(this.#n,e,!0)}#s=i.wk1(0);get streak(){return i.JtY(this.#s)}set streak(e){i.hZp(this.#s,e,!0)}resetScore(){this.wins=0,this.losses=0,this.total=0,this.streak=0}readWelcome(e){super.readWelcome(e),this.wins=e.getInt(),this.losses=e.getInt(),this.total=this.wins+this.losses,this.streak=e.getInt()}}class A extends w{#r=i.wk1(i.BXG((0,p.q)(f)));get mode(){return i.JtY(this.#r)}set mode(e){i.hZp(this.#r,e,!0)}#a=i.wk1(0);get pendingMove(){return i.JtY(this.#a)}set pendingMove(e){i.hZp(this.#a,e,!0)}#o=i.wk1(0);get pendingMoveAck(){return i.JtY(this.#o)}set pendingMoveAck(e){i.hZp(this.#o,e,!0)}INTERMISSION_TIME=5e3;ROUND_TIME=3e3;newClient(){return new I}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",o.RESET)}sendRename(e){this.sendf("is",o.RENAME,e)}sendPong(e){this.sendf("i2",o.PONG,e)}sendChat(e,t,n=-1){this.sendf("i3s",o.CHAT,t,n,(0,E.JK)(e))}sendActive(){this.sendf("i",o.ACTIVE)}sendReady(){this.sendf("i",o.READY)}sendMove(){this.sendf("iU",o.MOVE,BigInt(this.pendingMove))}MESSAGE_HANDLERS={[a.WELCOME]:this.processWelcome,[a.JOIN]:this.processJoin,[a.LEAVE]:this.processLeave,[a.RESET]:this.processReset,[a.RENAME]:this.processRename,[a.PING]:this.processPing,[a.PING_TIME]:this.processPingTime,[a.CHAT]:this.processChat,[a.ACTIVE]:this.processActive,[a.ROUND_WAIT]:this.processRoundWait,[a.ROUND_INTERM]:this.processRoundInterm,[a.ROUND_START]:this.processRoundStart,[a.READY]:this.processReady,[a.END_ROUND]:this.processEndRound,[a.MOVE_CONFIRM]:this.processMoveConfirm};processWelcomeMode(e){let t=e.get();this.mode.optInverted=!!(1&t),this.mode.optAddRandom=!!(2&t),this.mode.optTeams=e.getInt()}processRoundStart(e){super.processRoundStart(e),this.localClient.inRound&&(this.pendingMove=Math.floor(Math.random()*(this.mode.optTeams||this.roundPlayers.length)),this.sendMove())}processMoveConfirm(e){this.pendingMoveAck=Number(e.getUint64())}processEndRound(e){let t=Math.min(e.getInt(),this.clients.length),n=e.getUint64(),s=e.getInt(),r=Math.min(e.getInt(),this.clients.length),a=this.mode.optInverted,o=Number(n%BigInt(t)),i={playerCount:r,moveSum:n,moveRnd:s,winner:o,inverted:a,teams:Array.from({length:t},(e,t)=>({id:t,winner:t===o!==a,moveSum:0n,players:[]}))};for(let n=0;n<r;n++){let s=e.getCN();if(s<0)break;let r=e.getUint64(),a=this.clients[s];if(!a)continue;let o=n%t,l=i.teams[o];l.winner?(a.wins++,a.streak<0&&(a.streak=0),a.streak++):(a.losses++,a.streak>0&&(a.streak=0),a.streak--),a.total++,a==this.localClient&&(l.meIndex=l.players.length),l.moveSum+=r,l.players.push({name:a.name,cn:a.cn,move:r})}this.updatePlayers(),this.addHistory(i)}playersSortProps=[e=>e.streak,e=>e.wins-e.losses,e=>e.wins]}var C=i.vUu("<span> </span>:",1),N=i.vUu('<div class="d-inline-block"><span> </span> <span> </span></div>'),Y=i.vUu("<div><span></span> <!> <!></div>"),J=i.vUu('<div>Random: <span class="badge me-2 text-bg-outline-primary"> </span></div>'),y=i.vUu('<li class="list-group-item"><div> <span class="badge text-bg-success"> </span> </div> <!> <!></li>'),O=i.vUu('<li class="list-group-item">No past games!</li>'),T=i.vUu('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),k=n(124),_=n(131),b=i.vUu("<!> <!>",1),G=(e,t)=>t().sendMove(),U=(e,t)=>t().sendMove(),S=i.vUu('<input type="number" min="0" max="9007199254740992"/> <input type="range" class="form-range" min="0" max="9007199254740992"/>',1),x=i.vUu("<!> <div> </div> <!> <!>",1);i.MmH(["change"]);var j=n(101),L=i.vUu('<!> <!> <!> <div class="row"><div class="col-12 col-lg-8"><!> <!></div> <div class="col-12 col-lg-4 mb-3"><!></div></div>',1);(0,n(95).A)(function(e,t){let n;i.VCO(t,!0);let s=new u.Ay,r=new A(s),a=i.unG(()=>r.pastGames),o=i.unG(()=>r.leaderboard),E=i.unG(()=>r.localClient),M=i.unG(()=>r.roundState),w=(0,j.C)("game/mp/_shared/name","");var I=L(),B=i.esp(I);(0,v.A)(B,{get value(){return w.value},set value($$value){w.value=$$value}});var D=i.hg4(B,2);{let e=i.unG(()=>({name:w.value}));i.Lcc((0,m.A)(D,{gameId:"morra-prb9sv8g70oyhq9eznhkyq",roomType:"MorraRoom",get joinData(){return i.JtY(e)},get gameRoom(){return r.room},onJoinedRoom:e=>r.enterGame(e,w.value),formatGameMode:e=>R((0,p.e)(f,e)),get roomCreateOptions(){return f}}),e=>n=e,()=>n)}var P=i.hg4(D,2);{let e=i.unG(()=>i.JtY(M)===h.mk.INTERMISSION);(0,g.A)(P,{get inGame(){return r.room},get isActive(){return r.localClient.active},get canReady(){return i.JtY(e)},get isReady(){return r.localClient.ready},onActive:()=>r.sendActive(),onReady:()=>r.sendReady(),onReset:()=>r.sendReset(),onDisconnect:()=>(r.leaveGame(),n.refreshRooms()),children:(e,t)=>{!function(e,t){i.VCO(t,!0);let n=i._w2(t,"gameState",7),s=i.unG(()=>n().localClient),r=i.unG(()=>n().roundState),a=i.unG(()=>i.JtY(s).active&&i.JtY(r)==h.mk.ACTIVE&&i.JtY(s).inRound);var o=x(),l=i.esp(o),u=e=>{var t=i.Qq7("Waiting for players…");i.BCw(e,t)},d=e=>{var t=b(),s=i.esp(t),o=e=>{var t=i.Qq7("Intermission:");i.BCw(e,t)},l=e=>{var t=i.Imx(),n=i.esp(t),s=e=>{var t=i.Qq7("Make a move:");i.BCw(e,t)},r=e=>{var t=i.Qq7("Results are coming soon:");i.BCw(e,t)};i.if(n,e=>{i.JtY(a)?e(s):e(r,!1)},!0),i.BCw(e,t)};i.if(s,e=>{i.JtY(r)===h.mk.INTERMISSION?e(o):e(l,!1)});var u=i.hg4(s,2);(0,k.A)(u,{get startTime(){return n().roundTimerStart},get endTime(){return n().roundTimerEnd},get active(){return n().room}}),i.BCw(e,t)};i.if(l,e=>{i.JtY(r)===h.mk.WAITING?e(u):e(d,!1)});var c=i.hg4(l,2),v=i.jfp(c);i.cLc(c);var g=i.hg4(c,2),p=e=>{var t=S(),s=i.esp(t);i.R0j(s),s.__change=[G,n];var r=i.hg4(s,2);i.R0j(r),r.__change=[U,n],i.vNg(()=>i.ysU(s,1,`form-control is-${n().pendingMove===n().pendingMoveAck?"":"in"}valid`)),i.oJB(s,()=>n().pendingMove,e=>n().pendingMove=e),i.oJB(r,()=>n().pendingMove,e=>n().pendingMove=e),i.BCw(e,t)};i.if(g,e=>{i.JtY(a)&&e(p)});var m=i.hg4(g,2);(0,_.A)(m,{get localClient(){return i.JtY(s)},get inGame(){return n().roundPlayers},get inQueue(){return n().roundPlayerQueue}}),i.vNg(e=>i.jax(v,`Game Mode: ${e??""}`),[()=>R(n().mode)]),i.BCw(e,o),i.uYY()}(e,{get gameState(){return r}})},$$slots:{default:!0}})}var V=i.hg4(P,2),$=i.jfp(V),W=i.jfp($);(0,d.A)(W,{get canClear(){return i.JtY(a).length},onClear:()=>r.clearHistory(),children:(e,t)=>{var n,s;n={get results(){return i.JtY(a)}},s=T(),i.__1(s,21,()=>n.results,i.Pe0,(e,t)=>{var n=y(),s=i.jfp(n),r=i.jfp(s),a=i.hg4(r),o=i.jfp(a,!0);i.cLc(a);var l=i.hg4(a);i.cLc(s);var u=i.hg4(s,2);i.__1(u,17,()=>i.JtY(t).teams,i.Pe0,(e,n,s)=>{let r=i.unG(()=>null!=i.JtY(n).meIndex?"":"-outline");var a=Y(),o=i.jfp(a);o.textContent=`#${s}`;var l=i.hg4(o,2),u=e=>{var t=C(),s=i.esp(t),a=i.jfp(s,!0);i.cLc(s),i.K2T(),i.vNg(()=>{i.ysU(s,1,`badge text-bg${i.JtY(r)??""}-primary`),i.jax(a,i.JtY(n).moveSum)}),i.BCw(e,t)};i.if(l,e=>{i.JtY(t).teams.length<i.JtY(t).playerCount&&e(u)});var d=i.hg4(l,2);i.__1(d,17,()=>i.JtY(n).players,i.Pe0,(e,t,s,r)=>{let a=i.unG(()=>i.JtY(n).meIndex==s?"":"-outline");var o=N(),l=i.jfp(o),u=i.jfp(l);i.cLc(l);var d=i.hg4(l,2),c=i.jfp(d,!0);i.cLc(d),i.cLc(o),i.vNg(()=>{i.ysU(l,1,`badge me-1 text-bg${i.JtY(a)??""}-secondary`),i.jax(u,`${i.JtY(t).name??""} (${i.JtY(t).cn??""})`),i.ysU(d,1,`badge me-2 text-bg${i.JtY(a)??""}-primary`),i.jax(c,i.JtY(t).move)}),i.BCw(e,o)}),i.cLc(a),i.vNg(()=>i.ysU(o,1,`badge me-1 text-bg${i.JtY(r)??""}-${i.JtY(n).winner?"success":"danger"}`)),i.BCw(e,a)});var d=i.hg4(u,2),c=e=>{var n=J(),s=i.hg4(i.jfp(n)),r=i.jfp(s,!0);i.cLc(s),i.cLc(n),i.vNg(()=>i.jax(r,i.JtY(t).moveRnd)),i.BCw(e,n)};i.if(d,e=>{i.JtY(t).moveRnd>=0&&e(c)}),i.cLc(n),i.vNg(()=>{i.jax(r,`Total:
        ${i.JtY(t).moveSum??""} ≡ `),i.jax(o,i.JtY(t).winner),i.jax(l,` (mod ${i.JtY(t).teams.length??""})`)}),i.BCw(e,n)},e=>{var t=O();i.BCw(e,t)}),i.cLc(s),i.BCw(e,s)},$$slots:{default:!0}});var q=i.hg4(W,2);(0,c.A)(q,{get leaderboard(){return i.JtY(o)},get localClient(){return i.JtY(E)},columns:[["Streak",e=>e.streak],["Score",e=>e.wins-e.losses],["Win",e=>[e.wins,e.total]],["Loss",e=>[e.losses,e.total]]]}),i.cLc($);var H=i.hg4($,2),Q=i.jfp(H);(0,l.A)(Q,{get chatState(){return s},onInput:e=>(0,u.Oo)(r,e)}),i.cLc(H),i.cLc(V),i.BCw(e,I),i.uYY()})},127:function(e,t,n){n.d(t,{M0:()=>l,iq:()=>r,iw:()=>a,yh:()=>i,yn:()=>o});var s=n(128);let r=64;function a(e){return(e=e.replace(/[^a-zA-Z_ ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function o(){let e=new s.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",e.debugBuf,e),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function i(e,t){let n=e.filter(e=>e).sort((e,n)=>{for(let s of t){let t=s(e),r=s(n);if(t<r)return 1;if(t>r)return -1}return e.cn-n.cn}),s=1;return n.forEach((e,r)=>{if(r){let a=n[r-1];t.some(t=>t(e)!==t(a))&&(s=r+1)}n[r].rank=s}),n.sort((e,t)=>t.active-e.active)}function l(e,t){return e?`${e.name} (${e.cn})`:`<unknown${void 0===t?"":` (${t})`}>`}},43:function(){},59:function(e,t,n){n(43),n(8)},2:function(e,t,n){n.d(t,{BCw:()=>p.BC,BXG:()=>w.B,CJk:()=>c.CJ,Goy:()=>h.Go,Imx:()=>p.Im,JtY:()=>M.Jt,K2T:()=>g.K2,Lcc:()=>v.L,MWq:()=>h.MW,MmH:()=>u.Mm,Pe0:()=>a.Pe,Qq7:()=>p.Qq,R0j:()=>i.R0,UAl:()=>o.UA,VCO:()=>s.VC,_Nj:()=>A._N,__1:()=>a.__,_w2:()=>R._w,aIK:()=>i.aI,cLc:()=>g.cL,esp:()=>I.es,f0J:()=>u.f0,hZp:()=>f.hZ,hg4:()=>I.hg,hgi:()=>d.h,iRd:()=>R.iR,if:()=>r.A,jax:()=>E.j,jfp:()=>I.jf,lQ1:()=>A.lQ,mST:()=>c.mS,oJB:()=>c.oJ,p_Y:()=>i.p_,uYY:()=>s.uY,unG:()=>m.eO,vNg:()=>h.vN,vUu:()=>p.vU,wk1:()=>f.wk,ysU:()=>l.y}),n(3),n(4);var s=n(22);n(42),n(43),n(44),n(45),n(46),n(47),n(20),n(48),n(49),n(50);var r=n(51);n(52),n(53);var a=n(54);n(55),n(56);var o=n(40);n(57),n(58),n(36),n(59),n(60),n(61);var i=n(62),l=n(64),u=n(35);n(32);var d=n(65);n(67),n(70);var c=n(71);n(72),n(73),n(74),n(66),n(75);var v=n(76);n(77),n(78);var g=n(13);n(79),n(80),n(81);var p=n(37);n(29),n(23);var m=n(30),h=n(8),f=n(17),R=n(82);n(83),n(24),n(33);var E=n(34),M=n(6);n(86),n(68);var w=n(16);n(87);var I=n(12);n(63),n(21);var A=n(7);n(41),n(15),n(88),n(25)}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n.m=e,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];n.O=(t,s,r,a)=>{if(s){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[s,r,a];return}for(var i=1/0,o=0;o<e.length;o++){for(var[s,r,a]=e[o],l=!0,u=0;u<s.length;u++)(!1&a||i>=a)&&Object.keys(n.O).every(e=>n.O[e](s[u]))?s.splice(u--,1):(l=!1,a<i&&(i=a));if(l){e.splice(o--,1);var d=r();void 0!==d&&(t=d)}}return t}})(),n.rv=()=>"1.5.1",(()=>{var e={91:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,a,[o,i,l]=s,u=0;if(o.some(t=>0!==e[t])){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var d=l(n)}for(t&&t(s);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self.webpackChunkvwww=self.webpackChunkvwww||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.ruid="bundler=rspack@1.5.1";var s=n.O(void 0,["1","2","5","13","28","17","29","35","37","38","36","34"],function(){return n(135)});s=n.O(s)})();