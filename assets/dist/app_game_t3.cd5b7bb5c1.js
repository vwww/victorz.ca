(()=>{"use strict";var t={141:function(t,e,n){n(1);var r,o,a,i,l=n(2),u=n(5);function c(t,e){return t&3<<(e<<1)}function s(t,e){return!function(t,e,n=e){return e.some((e,r)=>e===(t&n[r]))}(t,1&e?p:d)?9===e?i.Tie:i.None:1&e?i.P1:i.P2}(r=a||(a={}))[r.None=0]="None",r[r.P1=1]="P1",r[r.P2=2]="P2",(o=i||(i={}))[o.None=0]="None",o[o.P1=1]="P1",o[o.P2=2]="P2",o[o.Tie=3]="Tie";function v(t){return t.reduceRight((t,e)=>e-1+3*t,0)}let p=[86016,1344,21,66576,16644,4161,65793,4368],d=[172032,2688,42,133152,33288,8322,131586,8736],g=[["Human"],["First",function(t){for(let e=0;e<9;++e)if(!c(t,e))return[[e],"First bot always chooses the first available slot."];throw Error("No slots left for nice bot")}],["Random",function(t,e){let n=[];for(let e=0;e<9;++e)c(t,e)||n.push(e);return[n,w(n.length,e)]}],["Nice",function(t,e,n){return m(t,e,n.map(t=>t<i.Tie?3^t:t),"lose")}],["Optimal",function(t,e,n){return m(t,e,n,"win")}]],b={};function h(t){return b[t]}function f(t,e){let n=[t[0],0,0,0];for(let r=1;r<=3;r++)n[e[r-1]]+=t[r];return n}function w(t,e){return"The bot "+(1===t?"really had no choice":"had "+t+" choices")+" for move #"+e+"."}function m(t,e,n,r){let o=b[t][0][v(n)],a=o[0]>0&&10-o[0]-e>>1,i=o[1];return[i,(a?a<2?`The bot is <strong>about to ${r}</strong>. `:`The bot <strong>will ${r}</strong> within ${a} moves. `:"")+w(i.length,e+1)]}var Y=l.vUu("<tr></tr>"),J=l.vUu("<table><tbody></tbody></table>");let y={hash:"svelte-ettaph",code:"table.svelte-ettaph {background-color:#add8e6;border-collapse:separate;border-radius:12px;border-spacing:10px;margin:auto;margin-bottom:10px;&.w1 {background-color:#008000}&.w2 {background-color:#ffa07a}&.w3 {background-color:#a9a9a9}}"};var k=l.vUu("<td></td>");let L={hash:"svelte-opxp2n",code:'td.svelte-opxp2n {background-color:#98afc7;border-radius:0.5em;cursor:not-allowed;height:7rem;margin:0.6em;position:relative;width:7rem;&.win {background-color:#696969;}&:before, &:after {position:absolute;}&:before {color:#eee;left:0.3em;top:0; /* there is spacing from the font? */}&:after {color:white;bottom:0;left:0;right:0;top:0;text-align:center;line-height:7rem;}&:before {font-size:2em}&:after {font-size:5.6em}&.p0:after {font-size:4.6rem}&.hlose,\n  &.htie.noW {background-color:#cd5c5c}&.hwin,\n  &.htie.noL {background-color:#20b2aa}\n\n  /* current player can force a win */&.hwin {&.noL:after {content:"+T"}&.noT:after {content:"+-"}&.noL.noT:after {content:"+"}}\n\n  /* opponent can force a win */&.hlose {&.noW:after {content:"-T"}&.noT:after {content:"-+"}&.noW.noT:after {content:"-"}}\n\n  /* win by move number (hide if pending) */&[data-hintTurn]:not(:hover):before {content:attr(data-hintTurn)}\n\n  /* no player can force a win */&.htie {&.noL,\n    &.noW {opacity:0.5}&.noL.noW {opacity:inherit}&.noW:after {content:"T-"}&.noL:after {content:"T+"}&.noL.noW {background-color:#ffa500}&.noL.noW:after {content:"T"}}\n\n  /* made and pending moves */&.p1, &.p0.n1:hover {background-color:#9acd32;&:after {content:"X"}}&.p2, &.p0.n2:hover {background-color:#ff7f50;&:after {content:"O"}}&.p0.n1, &.p0.n2 {cursor:pointer;&:hover {opacity:0.5}}}'};l.MmH(["click"]);var _=l.vUu("<td> </td>"),x=l.vUu("<tr><td></td><td> </td><td> </td><!></tr>"),T=l.vUu('<table class="table table-striped table-bordered"><thead><tr><th>Move</th><th>Paths</th><th>Position</th><th>X Win</th><th>O Win</th><th>Tie</th></tr></thead><tbody></tbody></table>');function j(t,e,n=!1){let r=l.wk1(l.BXG(e));function o(t){return"undefined"===t?void 0:JSON.parse(t)}if(window.localStorage){let a=localStorage.getItem(t);null!==a&&l.hZp(r,o(a),!0),l.MWq(()=>localStorage.setItem(t,void 0===l.JtY(r)?"undefined":JSON.stringify(l.JtY(r)))),n&&window.addEventListener("storage",n=>n.storageArea===localStorage&&n.key===t&&l.hZp(r,null==n.newValue?e:o(n.newValue),!0))}return{get value(){return l.JtY(r)},set value(newVal){l.hZp(r,newVal,!0)}}}var $=l.vUu("<button> </button>"),O=l.vUu('<div class="btn-group d-flex mb-2" role="group"></div>'),P=l.vUu("<button> </button>"),C=l.vUu("<button> </button>"),N=l.vUu("<button> </button>"),U=l.vUu("<button> </button>"),Z=l.vUu('<div class="row"><div class="col-md-6"><strong>Player X</strong> <!></div> <div class="col-md-6"><strong>Player O</strong> <!></div> <div class="col-12"><strong>Options</strong> <div class="btn-group d-flex mb-2" role="group"><button>Hints</button> <button class="w-100 btn btn-outline-secondary">Swap Types</button> <button class="w-100 btn btn-outline-secondary">Undo</button></div></div></div> <h2>Board</h2> <div class="row"><div class="col-sm-6"><p><!></p> <!></div> <div class="col-sm-6"><!></div></div> <h2>Rules</h2> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">X Wins</span> <!></div> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">O Wins</span> <!></div> <div class="btn-group d-flex mb-2" role="group"><span class="input-group-text">Tie</span> <!></div> <div class="input-group d-flex mb-2" role="group"><button class="flex-grow-1 btn btn-outline-secondary">Invert</button> <span class="input-group-text">Presets: X wants</span> <!></div> <h3>Prefer Outcome Timing <span class="badge text-bg-secondary">TODO</span></h3> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">Win</span> <button class="w-100 btn btn-outline-primary active">Earlier</button> <button class="w-100 btn btn-outline-warning disabled" title="not implemented yet">Anytime</button> <button class="w-100 btn btn-outline-success disabled" title="not implemented yet">Later</button></div> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">Tie</span> <button class="w-100 btn btn-outline-primary disabled" title="not implemented yet">Earlier</button> <button class="w-100 btn btn-outline-warning active">Anytime</button> <button class="w-100 btn btn-outline-success disabled" title="not implemented yet">Later</button></div> <div class="btn-group d-flex mb-3" role="group"><span class="input-group-text">Lose</span> <button class="w-100 btn btn-outline-primary disabled" title="not implemented yet">Earlier</button> <button class="w-100 btn btn-outline-warning disabled" title="not implemented yet">Anytime</button> <button class="w-100 btn btn-outline-success active">Later</button></div>',1);l.MmH(["click"]);let M=document.getElementById("app");(0,u.Or)(function(t,e){l.VCO(e,!0);let n=j("game/sp/t3/showHints",!0),r=j("game/sp/t3/playerType",[0,4]),o=j("game/sp/t3/winnerX",1),a=j("game/sp/t3/winnerO",2),p=j("game/sp/t3/winnerTie",3),d=l.unG(()=>[o.value,a.value,p.value]);l.MWq(()=>{o.value,a.value,p.value,V()});let w=l.wk1(void 0),m=l.wk1(void 0),M=l.wk1(void 0),B=l.wk1(void 0),W=l.wk1(void 0),S=l.BXG(Array(9)),I=l.BXG(Array(10)),X=l.wk1(""),G=l.wk1(void 0);function H(){l.hZp(w,0),l.hZp(m,1),l.hZp(M,0),l.hZp(B,0),l.hZp(W,0),I[0]=0,l.hZp(X,"Click to make the first move. It&rsquo;s an exciting new game."),q()}function A(t){return!(l.JtY(M)||c(l.JtY(w),t))}function E(t){l.hZp(w,l.JtY(w)|l.JtY(m)<<(t<<1)),l.hZp(m,3^l.JtY(m)),S[l.yoy(B)]=t,I[l.JtY(B)]=l.JtY(w),V()}function V(){var t,e;l.hZp(M,(t=s(l.JtY(w),l.JtY(B)),e=l.JtY(d),t?e[t-1]:t),!0),l.JtY(M)&&l.hZp(X,3===l.JtY(M)?"It&rsquo;s a tie.":(1===l.JtY(M)?"X":"O")+" wins!",!0)}function q(){for(;!l.JtY(M);){var t;let e,n=g[r.value[1&l.JtY(B)]][1];if(!n)break;(t=>{var n=l._Nj(t,2);e=n[0],l.hZp(X,n[1],!0)})(n(l.JtY(w),l.JtY(B),l.JtY(d)));let o=(t=e)[Math.floor(Math.random()*t.length)];A(o)&&E(o)}}setTimeout(function(){l.hZp(X,"(Building game tables&hellip; This should take less than a second.)");let t=Date.now();(function t(e,n,r){let o;if(b[e])return b[e];let a=s(e,r),i=[0,0,0,0];if(a)o=[...Array(27).keys()].map(t=>{var e;let o=(e=[1+t%3,1+(t/3|0)%3,1+(t/9|0)%3],a?e[a-1]:a);return[3===o?0:o===n?10-r:r-10]}),i[0]++,i[a]++;else{for(let o=0;o<9;++o)if(!c(e,o)){let a=t(e|n<<(o<<1),3^n,r+1)[1];for(let t=0;t<4;++t)i[t]+=a[t]}o=[...Array(27).keys()].map(o=>{let a=-2e9,i=[],l=-1,u=0,s=0;for(let v=0;v<9;++v)if(!c(e,v)){let c=t(e|n<<(v<<1),3^n,r+1)[0][o],p=-c[0];a===p?(i.push(v),u+=c[2]??1):a<p&&(a=p,i=[v],u=c[2]??1);let d=Math.sign(p);l<d&&(l=d,s=0),l===d&&(s+=c[3]??1)}return[a,i,u,s]})}return b[e]=[o,i]})(0,1,0),l.hZp(G,h,!0),l.hZp(X,"To build game tables, it took "+(Date.now()-t)+" ms.")},1),(0,u.Rc)(H);let R=[["X wins (Normal)","success"],["O wins (Inverted)","danger"],["Tie","warning"]],z=[["X wins (Inverted)","danger"],["O wins (Normal)","success"],["Tie","warning"]],F=[["X wins","primary"],["O wins","info"],["Tie (Normal)","success"]],K=[[1,2,3,"success","win (Normal)"],[2,1,3,"danger","loss (Inverted)"],[2,2,1,"warning","Tie"],[1,1,2,"info","not Tie"],[1,2,1,"primary","Last move"],[2,1,2,"dark","not Last move"]];var Q,D,tt,te,tn,tr,to=Z(),ta=l.esp(to);{let t=(t,e=l.lQ1)=>{var n=O();l.__1(n,21,()=>g,l.Pe0,(t,n,o)=>{let a;var i=l.unG(()=>l._Nj(l.JtY(n),1)),u=$();u.__click=()=>{var t;return t=e(),void(r.value[t]=o,H())};var c=l.jfp(u,!0);l.cLc(u),l.vNg(t=>{a=l.ysU(u,1,"w-100 btn btn-outline-secondary",null,a,t),l.jax(c,l.JtY(i)[0])},[()=>({active:o===r.value[e()]})]),l.BCw(t,u)}),l.cLc(n),l.BCw(t,n)};var ti=l.jfp(ta);t(l.hg4(l.jfp(ti),2),()=>0),l.cLc(ti);var tl=l.hg4(ti,2);t(l.hg4(l.jfp(tl),2),()=>1),l.cLc(tl);var tu=l.hg4(tl,2),tc=l.hg4(l.jfp(tu),2),ts=l.jfp(tc);ts.__click=()=>{n.value=!n.value};var tv=l.hg4(ts,2);tv.__click=function(){r.value=[r.value[1],r.value[0]],H()};var tp=l.hg4(tv,2);tp.__click=function(){if(l.JtY(W)){do{let t=S[l.cEh(B,-1)];l.hZp(m,3^l.JtY(m)),l.hZp(w,l.JtY(w)^l.JtY(m)<<(t<<1))}while(g[r.value[1&l.JtY(B)]][1]);l.hZp(M,0),l.yoy(W,-1),l.hZp(X,"You undid your move.")}},l.cLc(tc),l.cLc(tu),l.cLc(ta),l.vNg(()=>{l.ysU(ts,1,`w-100 btn btn-${n.value?"success active":"outline-primary"}`),tp.disabled=!l.JtY(W)})}var td=l.hg4(ta,4),tg=l.jfp(td),tb=l.jfp(tg),th=l.jfp(tb);l.qyt(th,()=>l.JtY(X)),l.cLc(tb),Q=l.hg4(tb,2),D={get board(){return l.JtY(w)},get winner(){return l.JtY(M)},get winnerMap(){return l.JtY(d)},get mark(){return l.JtY(m)},get showHints(){return n.value},get getMemo(){return l.JtY(G)},onMove:function(t){A(t)&&(l.hZp(X,"Click to make a move."),E(t),l.yoy(W),q())}},l.VCO(D,!0),function(t,e){l.kZQ(t,y);let n=[[0,1,2],[3,4,5],[6,7,8]];var r=J(),o=l.jfp(r);l.__1(o,21,()=>n,l.Pe0,(t,n)=>{var r=Y();l.__1(r,21,()=>l.JtY(n),l.Pe0,(t,n)=>{var r=l.Imx(),o=l.esp(r);l.UAl(o,()=>e.cell,()=>l.JtY(n)),l.BCw(t,r)}),l.cLc(r),l.BCw(t,r)}),l.cLc(o),l.cLc(r),l.vNg(()=>l.ysU(r,1,`w${e.winner??""}`,"svelte-ettaph")),l.BCw(t,r)}(Q,{get winner(){return D.winner},cell:(t,e=l.lQ1)=>{var n,r;let o,a,i,u,c=l.unG(()=>D.board>>(e()<<1)&3),s=l.unG(()=>!l.JtY(c)&&D.showHints&&!D.winner&&D.getMemo?.(D.board|D.mark<<(e()<<1))),p=l.unG(()=>{let[t,e]=function(){if(!l.JtY(s))return[];let[t,e]=l.JtY(s),n=t[v(D.winnerMap)][0],r=f(e,D.winnerMap),o=!r[3],a=!r[3^D.mark],i=!r[D.mark];return[`h${n?n<0?"win":"lose":"tie"}${i?" noW":""}${o?" noT":""}${a?" noL":""}`,n]}();return{hintClass:t,hintVal:e}});n={get winner(){return D.winner},get mark(){return l.JtY(c)},get markHover(){return D.mark},get hintClass(){return l.JtY(p).hintClass},get hintVal(){return l.JtY(p).hintVal},onMove:()=>D.onMove(e())},l.kZQ(t,L),a=l._w2(n,"markHover",3,0),i=l._w2(n,"hintClass",3,""),u=l._w2(n,"hintVal",3,0),(r=k()).__click=function(...t){n.onMove?.apply(this,t)},l.vNg(t=>{o=l.ysU(r,1,`p${n.mark??""} n${(n.winner?0:a())??""} ${i()??""}`,"svelte-opxp2n",o,t),l.aIK(r,"data-hintturn",u()?u()>0?10-u():10+u():void 0)},[()=>({win:n.winner})]),l.BCw(t,r)},$$slots:{cell:!0}}),l.uYY(),l.cLc(tg);var tf=l.hg4(tg,2);tt=l.jfp(tf),te={get boardHistory(){return I},get moveStack(){return S},get moveLength(){return l.JtY(B)},get winner(){return l.JtY(M)},get winnerMap(){return l.JtY(d)},get getMemo(){return l.JtY(G)}},l.VCO(te,!0),tn=T(),tr=l.hg4(l.jfp(tn)),l.__1(tr,20,()=>({length:9}),l.Pe0,(t,e,n)=>{let r,o=l.unG(()=>te.moveLength>n),a=l.unG(()=>l.JtY(o)||te.moveLength===n&&!te.winner),u=l.unG(()=>l.JtY(a)?te.getMemo?.(te.boardHistory[n]):void 0);var c=x(),s=l.jfp(c);s.textContent=`#${n+1}`;var p=l.hg4(s),d=l.jfp(p,!0);l.cLc(p);var g=l.hg4(p),b=l.jfp(g,!0);l.cLc(g);var h=l.hg4(g);l.__1(h,17,()=>[i.P1,i.P2,i.Tie],l.Pe0,(t,e)=>{let r=l.unG(()=>{let[t,r,o]=l.JtY(u)?function(t,e,n,r){let[o,a]=e,i=f(a,n),l=i[r],u=1!==r&&i[1]||2!==r&&i[2]||3!==r&&i[3],c=o[v(n.map(e=>((t^e!==r)&1)+1))],s=c[0],p=s>0?10-s:0,d=p?`${u?"Forcable":"Result"} (${p===t+1?"now":"by #"+p})`:l?"Possible":"Impossible",g=`table-${p?"info":l?"success":"danger"}`,b=c[2]??0,h=c[3]??0;return[d,g,`Path Count: ${l.toLocaleString()}

${s>0?"Forced":"Lost"}:
${b.toLocaleString()}
${h.toLocaleString()} (without timing)`]}(n,l.JtY(u),te.winnerMap,l.JtY(e)):[];return{text:t,className:r,title:o}});var o=_(),a=l.jfp(o,!0);l.cLc(o),l.vNg(()=>{l.ysU(o,1,l.$z$(l.JtY(r).className)),l.aIK(o,"title",l.JtY(r).title),l.jax(a,l.JtY(r).text)}),l.BCw(t,o)}),l.cLc(c),l.vNg((t,e,a)=>{l.aIK(p,"title",t),l.jax(d,e),r=l.ysU(g,1,"",null,r,a),l.jax(b,l.JtY(o)?te.moveStack[n]+1:"")},[()=>l.JtY(u)&&function(t,e){let n=t[1],r=f(n,e);return`Path Count:

${o(r)}

Unmapped
${o(n)}`;function o(t){return`X Win: ${t[1].toLocaleString()}
O Win: ${t[2].toLocaleString()}
Tie: ${t[3].toLocaleString()}
Total: ${t[0].toLocaleString()}`}}(l.JtY(u),te.winnerMap),()=>l.JtY(u)?.[1][0].toLocaleString()??"",()=>({"table-warning":l.JtY(o)})]),l.BCw(t,c)}),l.cLc(tr),l.cLc(tn),l.BCw(tt,tn),l.uYY(),l.cLc(tf),l.cLc(td);var tw=l.hg4(td,4),tm=l.hg4(l.jfp(tw),2);l.__1(tm,17,()=>R,l.Pe0,(t,e,n)=>{let r;var a=P();a.__click=()=>{o.value=n+1};var i=l.jfp(a,!0);l.cLc(a),l.vNg(t=>{r=l.ysU(a,1,`w-100 btn btn-outline-${l.JtY(e)[1]??""}`,null,r,t),l.jax(i,l.JtY(e)[0])},[()=>({active:o.value===n+1})]),l.BCw(t,a)}),l.cLc(tw);var tY=l.hg4(tw,2),tJ=l.hg4(l.jfp(tY),2);l.__1(tJ,17,()=>z,l.Pe0,(t,e,n)=>{let r;var o=C();o.__click=()=>{a.value=n+1};var i=l.jfp(o,!0);l.cLc(o),l.vNg(t=>{r=l.ysU(o,1,`w-100 btn btn-outline-${l.JtY(e)[1]??""}`,null,r,t),l.jax(i,l.JtY(e)[0])},[()=>({active:a.value===n+1})]),l.BCw(t,o)}),l.cLc(tY);var ty=l.hg4(tY,2),tk=l.hg4(l.jfp(ty),2);l.__1(tk,17,()=>F,l.Pe0,(t,e,n)=>{let r;var o=N();o.__click=()=>{p.value=n+1};var a=l.jfp(o,!0);l.cLc(o),l.vNg(t=>{r=l.ysU(o,1,`w-100 btn btn-outline-${l.JtY(e)[1]??""}`,null,r,t),l.jax(a,l.JtY(e)[0])},[()=>({active:p.value===n+1})]),l.BCw(t,o)}),l.cLc(ty);var tL=l.hg4(ty,2),t_=l.jfp(tL);t_.__click=()=>{o.value=3===o.value?3:3^o.value,a.value=3===a.value?3:3^a.value,p.value=3===p.value?3:3^p.value};var tx=l.hg4(t_,4);l.__1(tx,17,()=>K,l.Pe0,(t,e)=>{let n;var r=U();r.__click=()=>{o.value=l.JtY(e)[0],a.value=l.JtY(e)[1],p.value=l.JtY(e)[2]};var i=l.jfp(r,!0);l.cLc(r),l.vNg(t=>{n=l.ysU(r,1,`flex-grow-1 btn btn-outline-${l.JtY(e)[3]??""}`,null,n,t),l.jax(i,l.JtY(e)[4])},[()=>({active:o.value===l.JtY(e)[0]&&a.value===l.JtY(e)[1]&&p.value===l.JtY(e)[2]})]),l.BCw(t,r)}),l.cLc(tL),l.K2T(8),l.BCw(t,to),l.uYY()},{target:M}),document.getElementById("appLoading")?.remove()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.m=t,n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=[];n.O=(e,r,o,a)=>{if(r){a=a||0;for(var i=t.length;i>0&&t[i-1][2]>a;i--)t[i]=t[i-1];t[i]=[r,o,a];return}for(var l=1/0,i=0;i<t.length;i++){for(var[r,o,a]=t[i],u=!0,c=0;c<r.length;c++)(!1&a||l>=a)&&Object.keys(n.O).every(t=>n.O[t](r[c]))?r.splice(c--,1):(u=!1,a<l&&(l=a));if(u){t.splice(i--,1);var s=o();void 0!==s&&(e=s)}}return e}})(),n.rv=()=>"1.5.1",(()=>{var t={97:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,a,[i,l,u]=r,c=0;if(i.some(e=>0!==t[e])){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(u)var s=u(n)}for(e&&e(r);c<i.length;c++)a=i[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(s)},r=self.webpackChunkvwww=self.webpackChunkvwww||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.ruid="bundler=rspack@1.5.1";var r=n.O(void 0,["1","2","5","7","9","15","47","46","45"],function(){return n(141)});r=n.O(r)})();